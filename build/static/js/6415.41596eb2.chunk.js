/*! For license information please see 6415.41596eb2.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkwormhole_connector=self.webpackChunkwormhole_connector||[]).push([[6415],{6391:(e,t,n)=>{n.d(t,{S:()=>$,T:()=>Ar,_:()=>Br,a:()=>K,b:()=>Gr,c:()=>q,d:()=>Pr,e:()=>Ur,f:()=>Dr,g:()=>Lr,h:()=>_r,i:()=>Nr,j:()=>Rr,k:()=>zr,l:()=>Kr,m:()=>Wr,n:()=>qr,o:()=>Vr,p:()=>$r,s:()=>Ge});var r=n(45),i=n(9379),s=n(838),o=n(9111),a=n(9801),c=n(7547);const u=["size"],l=["readMethod","writeMethod"],d=["readMethod","writeMethod"],h=["serialize"],p=["toBytes","fromBytes"],g=["arguments"],f=["signer"],m=["transaction","signer"],y=["format"],v=["signal","timeout","pollInterval"];var b=Object.defineProperty,w=(e,t,n)=>((e,t,n)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);function k(e){let t=[],n=0;if(0===e)return[0];for(;e>0;)t[n]=127&e,(e>>=7)&&(t[n]|=128),n+=1;return t}class S{constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer)}shift(e){return this.bytePosition+=e,this}read8(){let e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){let e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){let e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){let e=this.read32(),t=this.read32().toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+t).toString(10)}read128(){let e=BigInt(this.read64()),t=BigInt(this.read64()).toString(16)+e.toString(16).padStart(16,"0");return BigInt("0x"+t).toString(10)}read256(){let e=BigInt(this.read128()),t=BigInt(this.read128()).toString(16)+e.toString(16).padStart(32,"0");return BigInt("0x"+t).toString(10)}readBytes(e){let t=this.bytePosition+this.dataView.byteOffset,n=new Uint8Array(this.dataView.buffer,t,e);return this.shift(e),n}readULEB(){let e=this.bytePosition+this.dataView.byteOffset,t=new Uint8Array(this.dataView.buffer,e),{value:n,length:r}=function(e){let t=0,n=0,r=0;for(;;){let i=e[r];if(r+=1,t|=(127&i)<<n,!(128&i))break;n+=7}return{value:t,length:r}}(t);return this.shift(r),n}readVec(e){let t=this.readULEB(),n=[];for(let r=0;r<t;r++)n.push(e(this,r,t));return n}}class j{constructor(){let{initialSize:e=1024,maxSize:t=1/0,allocateSize:n=1024}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.bytePosition=0,this.size=e,this.maxSize=t,this.allocateSize=n,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){const t=this.bytePosition+e;if(t>this.size){const e=Math.min(this.maxSize,this.size+this.allocateSize);if(t>e)throw new Error("Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ".concat(this.size,", Max size: ").concat(this.maxSize,", Required size: ").concat(t));this.size=e;const n=new ArrayBuffer(this.size);new Uint8Array(n).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(n)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return O(BigInt(e),8).forEach(e=>this.write8(e)),this}write128(e){return O(BigInt(e),16).forEach(e=>this.write8(e)),this}write256(e){return O(BigInt(e),32).forEach(e=>this.write8(e)),this}writeULEB(e){return k(e).forEach(e=>this.write8(e)),this}writeVec(e,t){return this.writeULEB(e.length),Array.from(e).forEach((n,r)=>t(this,n,r,e.length)),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return(0,s.g)(this.toBytes(),e)}}function O(e,t){let n=new Uint8Array(t),r=0;for(;e>0;)n[r]=Number(e%BigInt(256)),e/=BigInt(256),r+=1;return n}var I,E,C,x,A=e=>{throw TypeError(e)},T=(e,t,n)=>t.has(e)||A("Cannot "+n),M=(e,t,n)=>(T(e,t,"read from private field"),n?n.call(e):t.get(e)),P=(e,t,n)=>t.has(e)?A("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),B=(e,t,n,r)=>(T(e,t,"write to private field"),t.set(e,n),n);I=new WeakMap,E=new WeakMap;let U=class e{constructor(e){var t,n,r;P(this,I),P(this,E),this.name=e.name,this.read=e.read,this.serializedSize=null!==(t=e.serializedSize)&&void 0!==t?t:()=>null,B(this,I,e.write),B(this,E,null!==(n=e.serialize)&&void 0!==n?n:(e,t)=>{var n;const r=new j((0,i.A)({initialSize:null!==(n=this.serializedSize(e))&&void 0!==n?n:void 0},t));return M(this,I).call(this,e,r),r.toBytes()}),this.validate=null!==(r=e.validate)&&void 0!==r?r:()=>{}}write(e,t){this.validate(e),M(this,I).call(this,e,t)}serialize(e,t){return this.validate(e),new _(this,M(this,E).call(this,e,t))}parse(e){const t=new S(e);return this.read(t)}fromHex(e){return this.parse((0,s.e)(e))}fromBase58(e){return this.parse((0,s.h)(e))}fromBase64(e){return this.parse((0,s.f)(e))}transform(t){let{name:n,input:r,output:i,validate:s}=t;return new e({name:null!==n&&void 0!==n?n:this.name,read:e=>i?i(this.read(e)):this.read(e),write:(e,t)=>M(this,I).call(this,r?r(e):e,t),serializedSize:e=>this.serializedSize(r?r(e):e),serialize:(e,t)=>M(this,E).call(this,r?r(e):e,t),validate:e=>{null==s||s(e),this.validate(r?r(e):e)}})}};const z=Symbol.for("@mysten/serialized-bcs");function R(e){return!!e&&"object"==typeof e&&!0===e[z]}class _{constructor(e,t){P(this,C),P(this,x),B(this,C,e),B(this,x,t)}get[z](){return!0}toBytes(){return M(this,x)}toHex(){return(0,s.d)(M(this,x))}toBase64(){return(0,s.t)(M(this,x))}toBase58(){return(0,s.j)(M(this,x))}parse(){return M(this,C).parse(M(this,x))}}function D(e){let{size:t}=e,n=(0,r.A)(e,u);return new U((0,i.A)((0,i.A)({},n),{},{serializedSize:()=>t}))}function N(e){let{readMethod:t,writeMethod:n}=e,s=(0,r.A)(e,l);return D((0,i.A)((0,i.A)({},s),{},{read:e=>e[t](),write:(e,t)=>t[n](e),validate:e=>{var t;if(e<0||e>s.maxValue)throw new TypeError("Invalid ".concat(s.name," value: ").concat(e,". Expected value in range 0-").concat(s.maxValue));null==(t=s.validate)||t.call(s,e)}}))}function V(e){let{readMethod:t,writeMethod:n}=e,s=(0,r.A)(e,d);return D((0,i.A)((0,i.A)({},s),{},{read:e=>e[t](),write:(e,t)=>t[n](BigInt(e)),validate:e=>{var t;const n=BigInt(e);if(n<0||n>s.maxValue)throw new TypeError("Invalid ".concat(s.name," value: ").concat(n,". Expected value in range 0-").concat(s.maxValue));null==(t=s.validate)||t.call(s,n)}}))}C=new WeakMap,x=new WeakMap;const q={u8:e=>N((0,i.A)({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:255},e)),u16:e=>N((0,i.A)({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:65535},e)),u32:e=>N((0,i.A)({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1},e)),u64:e=>V((0,i.A)({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n},e)),u128:e=>V((0,i.A)({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n},e)),u256:e=>V((0,i.A)({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n},e)),bool:e=>D((0,i.A)((0,i.A)({name:"bool",size:1,read:e=>1===e.read8(),write:(e,t)=>t.write8(e?1:0)},e),{},{validate:t=>{var n;if(null==(n=null==e?void 0:e.validate)||n.call(e,t),"boolean"!=typeof t)throw new TypeError("Expected boolean, found ".concat(typeof t))}})),uleb128:e=>function(e){let{serialize:t}=e,n=(0,r.A)(e,h);const s=new U((0,i.A)((0,i.A)({},n),{},{serialize:t,write:(e,t)=>{for(const n of s.serialize(e).toBytes())t.write8(n)}}));return s}((0,i.A)({name:"uleb128",read:e=>e.readULEB(),serialize:e=>Uint8Array.from(k(e))},e)),bytes:(e,t)=>D((0,i.A)((0,i.A)({name:"bytes[".concat(e,"]"),size:e,read:t=>t.readBytes(e),write:(t,n)=>{const r=new Uint8Array(t);for(let s=0;s<e;s++){var i;n.write8(null!==(i=r[s])&&void 0!==i?i:0)}}},t),{},{validate:n=>{var r;if(null==(r=null==t?void 0:t.validate)||r.call(t,n),!n||"object"!=typeof n||!("length"in n))throw new TypeError("Expected array, found ".concat(typeof n));if(n.length!==e)throw new TypeError("Expected array of length ".concat(e,", found ").concat(n.length))}})),byteVector:e=>new U((0,i.A)((0,i.A)({name:"bytesVector",read:e=>{const t=e.readULEB();return e.readBytes(t)},write:(e,t)=>{const n=new Uint8Array(e);t.writeULEB(n.length);for(let i=0;i<n.length;i++){var r;t.write8(null!==(r=n[i])&&void 0!==r?r:0)}}},e),{},{serializedSize:e=>{const t="length"in e?e.length:null;return null==t?null:k(t).length+t},validate:t=>{var n;if(null==(n=null==e?void 0:e.validate)||n.call(e,t),!t||"object"!=typeof t||!("length"in t))throw new TypeError("Expected array, found ".concat(typeof t))}})),string:e=>function(e){let{toBytes:t,fromBytes:n}=e,s=(0,r.A)(e,p);return new U((0,i.A)((0,i.A)({},s),{},{read:e=>{const t=e.readULEB(),r=e.readBytes(t);return n(r)},write:(e,n)=>{const r=t(e);n.writeULEB(r.length);for(let t=0;t<r.length;t++)n.write8(r[t])},serialize:e=>{const n=t(e),r=k(n.length),i=new Uint8Array(r.length+n.length);return i.set(r,0),i.set(n,r.length),i},validate:e=>{var t;if("string"!=typeof e)throw new TypeError("Invalid ".concat(s.name," value: ").concat(e,". Expected string"));null==(t=s.validate)||t.call(s,e)}}))}((0,i.A)({name:"string",toBytes:e=>(new TextEncoder).encode(e),fromBytes:e=>(new TextDecoder).decode(e)},e)),fixedArray:(e,t,n)=>new U((0,i.A)((0,i.A)({name:"".concat(t.name,"[").concat(e,"]"),read:n=>{const r=new Array(e);for(let i=0;i<e;i++)r[i]=t.read(n);return r},write:(e,n)=>{for(const r of e)t.write(r,n)}},n),{},{validate:t=>{var r;if(null==(r=null==n?void 0:n.validate)||r.call(n,t),!t||"object"!=typeof t||!("length"in t))throw new TypeError("Expected array, found ".concat(typeof t));if(t.length!==e)throw new TypeError("Expected array of length ".concat(e,", found ").concat(t.length))}})),option:e=>q.enum("Option<".concat(e.name,">"),{None:null,Some:e}).transform({input:e=>null==e?{None:!0}:{Some:e},output:e=>"Some"===e.$kind?e.Some:null}),vector:(e,t)=>new U((0,i.A)((0,i.A)({name:"vector<".concat(e.name,">"),read:t=>{const n=t.readULEB(),r=new Array(n);for(let i=0;i<n;i++)r[i]=e.read(t);return r},write:(t,n)=>{n.writeULEB(t.length);for(const r of t)e.write(r,n)}},t),{},{validate:e=>{var n;if(null==(n=null==t?void 0:t.validate)||n.call(t,e),!e||"object"!=typeof e||!("length"in e))throw new TypeError("Expected array, found ".concat(typeof e))}})),tuple:(e,t)=>new U((0,i.A)((0,i.A)({name:"(".concat(e.map(e=>e.name).join(", "),")"),serializedSize:t=>{let n=0;for(let r=0;r<e.length;r++){const i=e[r].serializedSize(t[r]);if(null==i)return null;n+=i}return n},read:t=>{const n=[];for(const r of e)n.push(r.read(t));return n},write:(t,n)=>{for(let r=0;r<e.length;r++)e[r].write(t[r],n)}},t),{},{validate:n=>{var r;if(null==(r=null==t?void 0:t.validate)||r.call(t,n),!Array.isArray(n))throw new TypeError("Expected array, found ".concat(typeof n));if(n.length!==e.length)throw new TypeError("Expected array of length ".concat(e.length,", found ").concat(n.length))}})),struct(e,t,n){const r=Object.entries(t);return new U((0,i.A)((0,i.A)({name:e,serializedSize:e=>{let t=0;for(const[n,i]of r){const r=i.serializedSize(e[n]);if(null==r)return null;t+=r}return t},read:e=>{const t={};for(const[n,i]of r)t[n]=i.read(e);return t},write:(e,t)=>{for(const[n,i]of r)i.write(e[n],t)}},n),{},{validate:e=>{var t;if(null==(t=null==n?void 0:n.validate)||t.call(n,e),"object"!=typeof e||null==e)throw new TypeError("Expected object, found ".concat(typeof e))}}))},enum(e,t,n){const r=Object.entries(t);return new U((0,i.A)((0,i.A)({name:e,read:t=>{var n;const i=t.readULEB(),s=r[i];if(!s)throw new TypeError("Unknown value ".concat(i," for enum ").concat(e));const[o,a]=s;return{[o]:null===(n=null==a?void 0:a.read(t))||void 0===n||n,$kind:o}},write:(e,n)=>{const[i,s]=Object.entries(e).filter(e=>{let[n]=e;return Object.hasOwn(t,n)})[0];for(let t=0;t<r.length;t++){const[e,o]=r[t];if(e===i)return n.writeULEB(t),void(null==o||o.write(s,n))}}},n),{},{validate:r=>{var i;if(null==(i=null==n?void 0:n.validate)||i.call(n,r),"object"!=typeof r||null==r)throw new TypeError("Expected object, found ".concat(typeof r));const s=Object.keys(r).filter(e=>void 0!==r[e]&&Object.hasOwn(t,e));if(1!==s.length)throw new TypeError("Expected object with one key, but found ".concat(s.length," for type ").concat(e,"}"));const[o]=s;if(!Object.hasOwn(t,o))throw new TypeError("Invalid enum variant ".concat(o))}}))},map:(e,t)=>q.vector(q.tuple([e,t])).transform({name:"Map<".concat(e.name,", ").concat(t.name,">"),input:e=>[...e.entries()],output:e=>{const t=new Map;for(const[n,r]of e)t.set(n,r);return t}}),lazy:e=>function(e){let t=null;function n(){return t||(t=e()),t}return new U({name:"lazy",read:e=>n().read(e),serializedSize:e=>n().serializedSize(e),write:(e,t)=>n().write(e,t),serialize:(e,t)=>n().serialize(e,t).toBytes()})}(e)},L=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,W=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i;BigInt(1e9);const K=(0,s.k)("0x6"),$="".concat("0x2","::sui::SUI");(0,s.k)("0x5");const F=/^vector<(.+)>$/,G=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;class J{static parseFromStr(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("address"===e)return{address:null};if("bool"===e)return{bool:null};if("u8"===e)return{u8:null};if("u16"===e)return{u16:null};if("u32"===e)return{u32:null};if("u64"===e)return{u64:null};if("u128"===e)return{u128:null};if("u256"===e)return{u256:null};if("signer"===e)return{signer:null};const n=e.match(F);if(n)return{vector:J.parseFromStr(n[1],t)};const r=e.match(G);if(r)return{struct:{address:t?(0,s.n)(r[1]):r[1],module:r[2],name:r[3],typeParams:void 0===r[5]?[]:J.parseStructTypeArgs(r[5],t)}};throw new Error("Encountered unexpected token when parsing type args for ".concat(e))}static parseStructTypeArgs(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,s.s)(e).map(e=>J.parseFromStr(e,t))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return"vector<".concat(J.tagToString(e.vector),">");if("struct"in e){const t=e.struct,n=t.typeParams.map(J.tagToString).join(", ");return"".concat(t.address,"::").concat(t.module,"::").concat(t.name).concat(n?"<".concat(n,">"):"")}throw new Error("Invalid TypeTag")}}const Z=q.bytes(s.c).transform({validate:e=>{const t="string"==typeof e?e:(0,s.d)(e);if(!t||!(0,s.b)((0,s.n)(t)))throw new Error("Invalid Sui address ".concat(t))},input:e=>"string"==typeof e?(0,s.e)((0,s.n)(e)):e,output:e=>(0,s.n)((0,s.d)(e))}),H=q.vector(q.u8()).transform({name:"ObjectDigest",input:e=>(0,s.h)(e),output:e=>(0,s.j)(new Uint8Array(e)),validate:e=>{if(32!==(0,s.h)(e).length)throw new Error("ObjectDigest must be 32 bytes")}}),Y=q.struct("SuiObjectRef",{objectId:Z,version:q.u64(),digest:H}),Q=q.struct("SharedObjectRef",{objectId:Z,initialSharedVersion:q.u64(),mutable:q.bool()}),X=q.enum("ObjectArg",{ImmOrOwnedObject:Y,SharedObject:Q,Receiving:Y}),ee=q.enum("CallArg",{Pure:q.struct("Pure",{bytes:q.vector(q.u8()).transform({input:e=>"string"==typeof e?(0,s.f)(e):e,output:e=>(0,s.t)(new Uint8Array(e))})}),Object:X}),te=q.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:q.lazy(()=>te),struct:q.lazy(()=>ue),u16:null,u32:null,u256:null}),ne=te.transform({input:e=>"string"==typeof e?J.parseFromStr(e,!0):e,output:e=>J.tagToString(e)}),re=q.enum("Argument",{GasCoin:null,Input:q.u16(),Result:q.u16(),NestedResult:q.tuple([q.u16(),q.u16()])}),ie=q.struct("ProgrammableMoveCall",{package:Z,module:q.string(),function:q.string(),typeArguments:q.vector(ne),arguments:q.vector(re)}),se=q.enum("Command",{MoveCall:ie,TransferObjects:q.struct("TransferObjects",{objects:q.vector(re),address:re}),SplitCoins:q.struct("SplitCoins",{coin:re,amounts:q.vector(re)}),MergeCoins:q.struct("MergeCoins",{destination:re,sources:q.vector(re)}),Publish:q.struct("Publish",{modules:q.vector(q.vector(q.u8()).transform({input:e=>"string"==typeof e?(0,s.f)(e):e,output:e=>(0,s.t)(new Uint8Array(e))})),dependencies:q.vector(Z)}),MakeMoveVec:q.struct("MakeMoveVec",{type:(ye=ne,q.enum("Option",{None:null,Some:ye})).transform({input:e=>null===e?{None:!0}:{Some:e},output:e=>{var t;return null!==(t=e.Some)&&void 0!==t?t:null}}),elements:q.vector(re)}),Upgrade:q.struct("Upgrade",{modules:q.vector(q.vector(q.u8()).transform({input:e=>"string"==typeof e?(0,s.f)(e):e,output:e=>(0,s.t)(new Uint8Array(e))})),dependencies:q.vector(Z),package:Z,ticket:re})}),oe=q.struct("ProgrammableTransaction",{inputs:q.vector(ee),commands:q.vector(se)}),ae=q.enum("TransactionKind",{ProgrammableTransaction:oe,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),ce=q.enum("TransactionExpiration",{None:null,Epoch:function(e){return q.u64((0,i.A)({name:"unsafe_u64"},e)).transform({input:e=>e,output:e=>Number(e)})}()}),ue=q.struct("StructTag",{address:Z,module:q.string(),name:q.string(),typeParams:q.vector(te)}),le=q.struct("GasData",{payment:q.vector(Y),owner:Z,price:q.u64(),budget:q.u64()}),de=q.struct("TransactionDataV1",{kind:ae,sender:Z,gasData:le,expiration:ce}),he=q.enum("TransactionData",{V1:de}),pe=q.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),ge=q.enum("IntentVersion",{V0:null}),fe=q.enum("AppId",{Sui:null}),me=q.struct("Intent",{scope:pe,version:ge,appId:fe});var ye;function ve(e){return q.struct("IntentMessage<".concat(e.name,">"),{intent:me,value:e})}const be=q.enum("CompressedSignature",{ED25519:q.fixedArray(64,q.u8()),Secp256k1:q.fixedArray(64,q.u8()),Secp256r1:q.fixedArray(64,q.u8()),ZkLogin:q.vector(q.u8())}),we=q.enum("PublicKey",{ED25519:q.fixedArray(32,q.u8()),Secp256k1:q.fixedArray(33,q.u8()),Secp256r1:q.fixedArray(33,q.u8()),ZkLogin:q.vector(q.u8())}),ke=q.struct("MultiSigPkMap",{pubKey:we,weight:q.u8()}),Se=q.struct("MultiSigPublicKey",{pk_map:q.vector(ke),threshold:q.u16()}),je=q.struct("MultiSig",{sigs:q.vector(be),bitmap:q.u16(),multisig_pk:Se}),Oe=q.vector(q.u8()).transform({input:e=>"string"==typeof e?(0,s.f)(e):e,output:e=>(0,s.t)(new Uint8Array(e))}),Ie=q.struct("SenderSignedTransaction",{intentMessage:ve(he),txSignatures:q.vector(Oe)}),Ee=q.vector(Ie,{name:"SenderSignedData"}),Ce=q.struct("PasskeyAuthenticator",{authenticatorData:q.vector(q.u8()),clientDataJson:q.string(),userSignature:q.vector(q.u8())}),xe=q.enum("PackageUpgradeError",{UnableToFetchPackage:q.struct("UnableToFetchPackage",{packageId:Z}),NotAPackage:q.struct("NotAPackage",{objectId:Z}),IncompatibleUpgrade:null,DigestDoesNotMatch:q.struct("DigestDoesNotMatch",{digest:q.vector(q.u8())}),UnknownUpgradePolicy:q.struct("UnknownUpgradePolicy",{policy:q.u8()}),PackageIDDoesNotMatch:q.struct("PackageIDDoesNotMatch",{packageId:Z,ticketId:Z})}),Ae=q.struct("ModuleId",{address:Z,name:q.string()}),Te=q.struct("MoveLocation",{module:Ae,function:q.u16(),instruction:q.u16(),functionName:q.option(q.string())}),Me=q.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:q.struct("IndexOutOfBounds",{idx:q.u16()}),SecondaryIndexOutOfBounds:q.struct("SecondaryIndexOutOfBounds",{resultIdx:q.u16(),secondaryIdx:q.u16()}),InvalidResultArity:q.struct("InvalidResultArity",{resultIdx:q.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),Pe=q.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),Be=q.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:q.struct("MoveObjectTooBig",{objectSize:q.u64(),maxObjectSize:q.u64()}),MovePackageTooBig:q.struct("MovePackageTooBig",{objectSize:q.u64(),maxObjectSize:q.u64()}),CircularObjectOwnership:q.struct("CircularObjectOwnership",{object:Z}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:q.option(Te),MoveAbort:q.tuple([Te,q.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:q.struct("CommandArgumentError",{argIdx:q.u16(),kind:Me}),TypeArgumentError:q.struct("TypeArgumentError",{argumentIdx:q.u16(),kind:Pe}),UnusedValueWithoutDrop:q.struct("UnusedValueWithoutDrop",{resultIdx:q.u16(),secondaryIdx:q.u16()}),InvalidPublicFunctionReturnType:q.struct("InvalidPublicFunctionReturnType",{idx:q.u16()}),InvalidTransferObject:null,EffectsTooLarge:q.struct("EffectsTooLarge",{currentSize:q.u64(),maxSize:q.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:q.struct("PackageUpgradeError",{upgradeError:xe}),WrittenObjectsTooLarge:q.struct("WrittenObjectsTooLarge",{currentSize:q.u64(),maxSize:q.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:q.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:q.vector(Z)}),AddressDeniedForCoin:q.struct("AddressDeniedForCoin",{address:Z,coinType:q.string()}),CoinTypeGlobalPause:q.struct("CoinTypeGlobalPause",{coinType:q.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),Ue=q.enum("ExecutionStatus",{Success:null,Failed:q.struct("ExecutionFailed",{error:Be,command:q.option(q.u64())})}),ze=q.struct("GasCostSummary",{computationCost:q.u64(),storageCost:q.u64(),storageRebate:q.u64(),nonRefundableStorageFee:q.u64()}),Re=q.enum("Owner",{AddressOwner:Z,ObjectOwner:Z,Shared:q.struct("Shared",{initialSharedVersion:q.u64()}),Immutable:null}),_e=q.struct("TransactionEffectsV1",{status:Ue,executedEpoch:q.u64(),gasUsed:ze,modifiedAtVersions:q.vector(q.tuple([Z,q.u64()])),sharedObjects:q.vector(Y),transactionDigest:H,created:q.vector(q.tuple([Y,Re])),mutated:q.vector(q.tuple([Y,Re])),unwrapped:q.vector(q.tuple([Y,Re])),deleted:q.vector(Y),unwrappedThenDeleted:q.vector(Y),wrapped:q.vector(Y),gasObject:q.tuple([Y,Re]),eventsDigest:q.option(H),dependencies:q.vector(H)}),De=q.tuple([q.u64(),H]),Ne=q.enum("ObjectIn",{NotExist:null,Exist:q.tuple([De,Re])}),Ve=q.enum("ObjectOut",{NotExist:null,ObjectWrite:q.tuple([H,Re]),PackageWrite:De}),qe=q.enum("IDOperation",{None:null,Created:null,Deleted:null}),Le=q.struct("EffectsObjectChange",{inputState:Ne,outputState:Ve,idOperation:qe}),We=q.enum("UnchangedSharedKind",{ReadOnlyRoot:De,MutateDeleted:q.u64(),ReadDeleted:q.u64(),Cancelled:q.u64(),PerEpochConfig:null}),Ke=q.struct("TransactionEffectsV2",{status:Ue,executedEpoch:q.u64(),gasUsed:ze,transactionDigest:H,gasObjectIndex:q.option(q.u32()),eventsDigest:q.option(H),dependencies:q.vector(H),lamportVersion:q.u64(),changedObjects:q.vector(q.tuple([Z,Le])),unchangedSharedObjects:q.vector(q.tuple([Z,We])),auxDataDigest:q.option(H)}),$e=q.enum("TransactionEffects",{V1:_e,V2:Ke});function Fe(e){switch(e){case"u8":return q.u8();case"u16":return q.u16();case"u32":return q.u32();case"u64":return q.u64();case"u128":return q.u128();case"u256":return q.u256();case"bool":return q.bool();case"string":return q.string();case"id":case"address":return Z}const t=e.match(/^(vector|option)<(.+)>$/);if(t){const[e,n]=t.slice(1);return"vector"===e?q.vector(Fe(n)):q.option(Fe(n))}throw new Error("Invalid Pure type name: ".concat(e))}const Ge=(0,i.A)((0,i.A)({},q),{},{U8:q.u8(),U16:q.u16(),U32:q.u32(),U64:q.u64(),U128:q.u128(),U256:q.u256(),ULEB128:q.uleb128(),Bool:q.bool(),String:q.string(),Address:Z,AppId:fe,Argument:re,CallArg:ee,CompressedSignature:be,GasData:le,Intent:me,IntentMessage:ve,IntentScope:pe,IntentVersion:ge,MultiSig:je,MultiSigPkMap:ke,MultiSigPublicKey:Se,ObjectArg:X,ObjectDigest:H,ProgrammableMoveCall:ie,ProgrammableTransaction:oe,PublicKey:we,SenderSignedData:Ee,SenderSignedTransaction:Ie,SharedObjectRef:Q,StructTag:ue,SuiObjectRef:Y,Command:se,TransactionData:he,TransactionDataV1:de,TransactionExpiration:ce,TransactionKind:ae,TypeTag:ne,TransactionEffects:$e,PasskeyAuthenticator:Ce}),Je={"-32700":"ParseError","-32701":"OversizedRequest","-32702":"OversizedResponse","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError","-32604":"ServerBusy","-32000":"CallExecutionFailed","-32001":"UnknownError","-32003":"SubscriptionClosed","-32004":"SubscriptionClosedWithError","-32005":"BatchesNotSupported","-32006":"TooManySubscriptions","-32050":"TransientError","-32002":"TransactionExecutionClientError"};class Ze extends Error{}class He extends Ze{constructor(e,t){var n;super(e),this.code=t,this.type=null!==(n=Je[t])&&void 0!==n?n:"ServerError"}}class Ye extends Ze{constructor(e,t,n){super(e),this.status=t,this.statusText=n}}var Qe,Xe,et,tt,nt,rt,it,st,ot,at=e=>{throw TypeError(e)},ct=(e,t,n)=>t.has(e)||at("Cannot "+n),ut=(e,t,n)=>(ct(e,t,"read from private field"),n?n.call(e):t.get(e)),lt=(e,t,n)=>t.has(e)?at("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),dt=(e,t,n,r)=>(ct(e,t,"write to private field"),t.set(e,n),n),ht=(e,t,n)=>(ct(e,t,"access private method"),n);const pt={WebSocketConstructor:typeof WebSocket<"u"?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5};class gt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(lt(this,it),lt(this,Qe,0),lt(this,Xe,0),lt(this,et,null),lt(this,tt,null),lt(this,nt,new Set),lt(this,rt,new Map),this.endpoint=e,this.options=(0,i.A)((0,i.A)({},pt),t),!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=function(e){const t=new URL(e);return t.protocol=t.protocol.replace("http","ws"),t.toString()}(this.endpoint))}async makeRequest(e,t){const n=await ht(this,it,st).call(this);return new Promise((r,i)=>{dt(this,Qe,ut(this,Qe)+1),ut(this,rt).set(ut(this,Qe),{resolve:r,reject:i,timeout:setTimeout(()=>{ut(this,rt).delete(ut(this,Qe)),i(new Error("Request timeout: ".concat(e)))},this.options.callTimeout)}),n.send(JSON.stringify({jsonrpc:"2.0",id:ut(this,Qe),method:e,params:t}))}).then(e=>{let{error:t,result:n}=e;if(t)throw new He(t.message,t.code);return n})}async subscribe(e){const t=new ft(e);return ut(this,nt).add(t),await t.subscribe(this),()=>t.unsubscribe(this)}}Qe=new WeakMap,Xe=new WeakMap,et=new WeakMap,tt=new WeakMap,nt=new WeakMap,rt=new WeakMap,it=new WeakSet,st=function(){return ut(this,tt)||dt(this,tt,new Promise(e=>{var t;null==(t=ut(this,et))||t.close(),dt(this,et,new this.options.WebSocketConstructor(this.endpoint)),ut(this,et).addEventListener("open",()=>{dt(this,Xe,0),e(ut(this,et))}),ut(this,et).addEventListener("close",()=>{((e,t,n,r)=>({set _(n){dt(e,t,n)},get _(){return ut(e,t,r)}}))(this,Xe)._++,ut(this,Xe)<=this.options.maxReconnects&&setTimeout(()=>{ht(this,it,ot).call(this)},this.options.reconnectTimeout)}),ut(this,et).addEventListener("message",e=>{let t,{data:n}=e;try{t=JSON.parse(n)}catch(r){return void console.error(new Error("Failed to parse RPC message: ".concat(n),{cause:r}))}if("id"in t&&null!=t.id&&ut(this,rt).has(t.id)){const{resolve:e,timeout:n}=ut(this,rt).get(t.id);clearTimeout(n),e(t)}else if("params"in t){const{params:e}=t;ut(this,nt).forEach(t=>{t.subscriptionId===e.subscription&&e.subscription===t.subscriptionId&&t.onMessage(e.result)})}})})),ut(this,tt)},ot=async function(){var e;return null==(e=ut(this,et))||e.close(),dt(this,tt,null),Promise.allSettled([...ut(this,nt)].map(e=>e.subscribe(this)))};class ft{constructor(e){this.subscriptionId=null,this.subscribed=!1,this.input=e}onMessage(e){this.subscribed&&this.input.onMessage(e)}async unsubscribe(e){const{subscriptionId:t}=this;return this.subscribed=!1,null!=t&&(this.subscriptionId=null,e.makeRequest(this.input.unsubscribe,[t]))}async subscribe(e){this.subscriptionId=null,this.subscribed=!0;const t=await e.makeRequest(this.input.method,this.input.params);this.subscribed&&(this.subscriptionId=t)}}var mt,yt,vt,bt,wt,kt=e=>{throw TypeError(e)},St=(e,t,n)=>t.has(e)||kt("Cannot "+n),jt=(e,t,n)=>(St(e,t,"read from private field"),n?n.call(e):t.get(e)),Ot=(e,t,n)=>t.has(e)?kt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),It=(e,t,n,r)=>(St(e,t,"write to private field"),t.set(e,n),n);class Et{constructor(e){Ot(this,bt),Ot(this,mt,0),Ot(this,yt),Ot(this,vt),It(this,yt,e)}fetch(e,t){var n;const r=null!==(n=jt(this,yt).fetch)&&void 0!==n?n:fetch;if(!r)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return r(e,t)}async request(e){var t,n,r;It(this,mt,jt(this,mt)+1);const s=await this.fetch(null!==(t=null==(n=jt(this,yt).rpc)?void 0:n.url)&&void 0!==t?t:jt(this,yt).url,{method:"POST",headers:(0,i.A)({"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":"1.21.2","Client-Target-Api-Version":"1.43.0","Client-Request-Method":e.method},null==(r=jt(this,yt).rpc)?void 0:r.headers),body:JSON.stringify({jsonrpc:"2.0",id:jt(this,mt),method:e.method,params:e.params})});if(!s.ok)throw new Ye("Unexpected status code: ".concat(s.status),s.status,s.statusText);const o=await s.json();if("error"in o&&null!=o.error)throw new He(o.error.message,o.error.code);return o.result}async subscribe(e){const t=await((e,t,n)=>(St(e,t,"access private method"),n))(this,bt,wt).call(this).subscribe(e);return async()=>!!await t()}}mt=new WeakMap,yt=new WeakMap,vt=new WeakMap,bt=new WeakSet,wt=function(){var e;if(!jt(this,vt)){var t,n;const r=null!==(t=jt(this,yt).WebSocketConstructor)&&void 0!==t?t:WebSocket;if(!r)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");It(this,vt,new gt(null!==(n=null==(e=jt(this,yt).websocket)?void 0:e.url)&&void 0!==n?n:jt(this,yt).url,(0,i.A)({WebSocketConstructor:r},jt(this,yt).websocket)))}return jt(this,vt)};function Ct(e){if("string"==typeof e)switch(e){case"address":return Ge.Address;case"bool":return Ge.Bool;case"u8":return Ge.U8;case"u16":return Ge.U16;case"u32":return Ge.U32;case"u64":return Ge.U64;case"u128":return Ge.U128;case"u256":return Ge.U256;default:throw new Error("Unknown type signature ".concat(e))}if("vector"in e){if("u8"===e.vector)return Ge.vector(Ge.U8).transform({input:e=>"string"==typeof e?(new TextEncoder).encode(e):e,output:e=>e});const t=Ct(e.vector);return t?Ge.vector(t):null}if("datatype"in e){const t=(0,s.n)(e.datatype.package);if(t===(0,s.n)("0x1")){if("ascii"===e.datatype.module&&"String"===e.datatype.type||"string"===e.datatype.module&&"String"===e.datatype.type)return Ge.String;if("option"===e.datatype.module&&"Option"===e.datatype.type){const t=Ct(e.datatype.typeParameters[0]);return t?Ge.vector(t):null}}if(t===(0,s.n)("0x2")&&"object"===e.datatype.module&&"ID"===e.datatype.type)return Ge.Address}return null}function xt(e){if("string"==typeof e)switch(e){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw new Error("Unexpected type ".concat(e))}if("Vector"in e)return{vector:xt(e.Vector)};if("Struct"in e)return{datatype:{package:e.Struct.address,module:e.Struct.module,type:e.Struct.name,typeParameters:e.Struct.typeArguments.map(xt)}};if("TypeParameter"in e)return{typeParameter:e.TypeParameter};throw new Error("Unexpected type ".concat(JSON.stringify(e)))}const At={Pure:function(e){return{$kind:"Pure",Pure:{bytes:e instanceof Uint8Array?(0,s.t)(e):e.toBase64()}}},ObjectRef(e){let{objectId:t,digest:n,version:r}=e;return{$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:n,version:r,objectId:(0,s.n)(t)}}}},SharedObjectRef(e){let{objectId:t,mutable:n,initialSharedVersion:r}=e;return{$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:n,initialSharedVersion:r,objectId:(0,s.n)(t)}}}},ReceivingRef(e){let{objectId:t,digest:n,version:r}=e;return{$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:n,version:r,objectId:(0,s.n)(t)}}}}};function Tt(e){var t,n,r;const i=typeof e;return"string"===i?'"'.concat(e,'"'):"number"===i||"bigint"===i||"boolean"===i?"".concat(e):"object"===i||"function"===i?null!==(t=e&&(null==(r=null==(n=Object.getPrototypeOf(e))?void 0:n.constructor)?void 0:r.name))&&void 0!==t?t:"null":i}function Mt(e,t,n,r,i){var s,o,a,c,u,l,d,h;const p=i&&"input"in i?i.input:n.value,g=null!==(s=null!==(o=null==i?void 0:i.expected)&&void 0!==o?o:e.expects)&&void 0!==s?s:null,f=null!==(a=null==i?void 0:i.received)&&void 0!==a?a:Tt(p),m={kind:e.kind,type:e.type,input:p,expected:g,received:f,message:"Invalid ".concat(t,": ").concat(g?"Expected ".concat(g," but r"):"R","eceived ").concat(f),requirement:e.requirement,path:null==i?void 0:i.path,issues:null==i?void 0:i.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},y="schema"===e.kind,v=null!==(c=null!==(u=null!==(l=null!==(d=null!==(h=null==i?void 0:i.message)&&void 0!==h?h:e.message)&&void 0!==d?d:function(e,t){var n;return null==(n=void 0)?void 0:n.get(t)}(e.reference,m.lang))&&void 0!==l?l:y?void m.lang:null)&&void 0!==u?u:r.message)&&void 0!==c?c:void m.lang;v&&(m.message="function"==typeof v?v(m):v),y&&(n.typed=!1),n.issues?n.issues.push(m):n.issues=[m]}function Pt(e,t){return Object.hasOwn(e,t)&&"__proto__"!==t&&"prototype"!==t&&"constructor"!==t}var Bt=class extends Error{constructor(e){super(e[0].message),w(this,"issues"),this.name="ValiError",this.issues=e}};function Ut(e,t){return{kind:"validation",type:"check",reference:Ut,async:!1,expects:null,requirement:e,message:t,_run(e,t){return e.typed&&!this.requirement(e.value)&&Mt(this,"input",e,t),e}}}function zt(e){return{kind:"validation",type:"integer",reference:zt,async:!1,expects:null,requirement:Number.isInteger,message:e,_run(e,t){return e.typed&&!this.requirement(e.value)&&Mt(this,"integer",e,t),e}}}function Rt(e){return{kind:"transformation",type:"transform",reference:Rt,async:!1,operation:e,_run(e){return e.value=this.operation(e.value),e}}}function _t(e,t,n){return"function"==typeof e.default?e.default(t,n):e.default}function Dt(e,t){return!e._run({typed:!1,value:t},{abortEarly:!0}).issues}function Nt(e,t){return{kind:"schema",type:"array",reference:Nt,expects:"Array",async:!1,item:e,message:t,_run(e,t){var n;const r=e.value;if(Array.isArray(r)){e.typed=!0,e.value=[];for(let i=0;i<r.length;i++){const s=r[i],o=this.item._run({typed:!1,value:s},t);if(o.issues){const a={type:"array",origin:"value",input:r,key:i,value:s};for(const t of o.issues)t.path?t.path.unshift(a):t.path=[a],null==(n=e.issues)||n.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value.push(o.value)}}else Mt(this,"type",e,t);return e}}}function Vt(e){return{kind:"schema",type:"bigint",reference:Vt,expects:"bigint",async:!1,message:e,_run(e,t){return"bigint"==typeof e.value?e.typed=!0:Mt(this,"type",e,t),e}}}function qt(e){return{kind:"schema",type:"boolean",reference:qt,expects:"boolean",async:!1,message:e,_run(e,t){return"boolean"==typeof e.value?e.typed=!0:Mt(this,"type",e,t),e}}}function Lt(e){return{kind:"schema",type:"lazy",reference:Lt,expects:"unknown",async:!1,getter:e,_run(e,t){return this.getter(e.value)._run(e,t)}}}function Wt(e,t){return{kind:"schema",type:"literal",reference:Wt,expects:Tt(e),async:!1,literal:e,message:t,_run(e,t){return e.value===this.literal?e.typed=!0:Mt(this,"type",e,t),e}}}function Kt(e){const t={kind:"schema",type:"nullable",reference:Kt,expects:"".concat(e.expects," | null"),async:!1,wrapped:e,_run(e,t){return null===e.value&&("default"in this&&(e.value=_t(this,e,t)),null===e.value)?(e.typed=!0,e):this.wrapped._run(e,t)}};for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return 0 in r&&(t.default=r[0]),t}function $t(e){const t={kind:"schema",type:"nullish",reference:$t,expects:"".concat(e.expects," | null | undefined"),async:!1,wrapped:e,_run(e,t){return null!==e.value&&void 0!==e.value||("default"in this&&(e.value=_t(this,e,t)),null!==e.value&&void 0!==e.value)?this.wrapped._run(e,t):(e.typed=!0,e)}};for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return 0 in r&&(t.default=r[0]),t}function Ft(e){return{kind:"schema",type:"number",reference:Ft,expects:"number",async:!1,message:e,_run(e,t){return"number"!=typeof e.value||isNaN(e.value)?Mt(this,"type",e,t):e.typed=!0,e}}}function Gt(e,t){return{kind:"schema",type:"object",reference:Gt,expects:"Object",async:!1,entries:e,message:t,_run(e,t){var n;const r=e.value;if(r&&"object"==typeof r){e.typed=!0,e.value={};for(const i in this.entries){const s=r[i],o=this.entries[i]._run({typed:!1,value:s},t);if(o.issues){const a={type:"object",origin:"value",input:r,key:i,value:s};for(const t of o.issues)t.path?t.path.unshift(a):t.path=[a],null==(n=e.issues)||n.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),(void 0!==o.value||i in r)&&(e.value[i]=o.value)}}else Mt(this,"type",e,t);return e}}}function Jt(e){const t={kind:"schema",type:"optional",reference:Jt,expects:"".concat(e.expects," | undefined"),async:!1,wrapped:e,_run(e,t){return void 0===e.value&&("default"in this&&(e.value=_t(this,e,t)),void 0===e.value)?(e.typed=!0,e):this.wrapped._run(e,t)}};for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return 0 in r&&(t.default=r[0]),t}function Zt(e,t,n){return{kind:"schema",type:"record",reference:Zt,expects:"Object",async:!1,key:e,value:t,message:n,_run(e,t){var n,r;const i=e.value;if(i&&"object"==typeof i){e.typed=!0,e.value={};for(const s in i)if(Pt(i,s)){const o=i[s],a=this.key._run({typed:!1,value:s},t);if(a.issues){const r={type:"object",origin:"key",input:i,key:s,value:o};for(const t of a.issues)t.path=[r],null==(n=e.issues)||n.push(t);if(e.issues||(e.issues=a.issues),t.abortEarly){e.typed=!1;break}}const c=this.value._run({typed:!1,value:o},t);if(c.issues){const n={type:"object",origin:"value",input:i,key:s,value:o};for(const t of c.issues)t.path?t.path.unshift(n):t.path=[n],null==(r=e.issues)||r.push(t);if(e.issues||(e.issues=c.issues),t.abortEarly){e.typed=!1;break}}(!a.typed||!c.typed)&&(e.typed=!1),a.typed&&(e.value[a.value]=c.value)}}else Mt(this,"type",e,t);return e}}}function Ht(e){return{kind:"schema",type:"string",reference:Ht,expects:"string",async:!1,message:e,_run(e,t){return"string"==typeof e.value?e.typed=!0:Mt(this,"type",e,t),e}}}function Yt(e,t){return{kind:"schema",type:"tuple",reference:Yt,expects:"Array",async:!1,items:e,message:t,_run(e,t){var n;const r=e.value;if(Array.isArray(r)){e.typed=!0,e.value=[];for(let i=0;i<this.items.length;i++){const s=r[i],o=this.items[i]._run({typed:!1,value:s},t);if(o.issues){const a={type:"array",origin:"value",input:r,key:i,value:s};for(const t of o.issues)t.path?t.path.unshift(a):t.path=[a],null==(n=e.issues)||n.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value.push(o.value)}}else Mt(this,"type",e,t);return e}}}function Qt(e){let t;if(e)for(const n of e)t?t.push(...n.issues):t=n.issues;return t}function Xt(e,t){return{kind:"schema",type:"union",reference:Xt,expects:[...new Set(e.map(e=>e.expects))].join(" | ")||"never",async:!1,options:e,message:t,_run(e,t){let n,r,i;for(const s of this.options){const o=s._run({typed:!1,value:e.value},t);if(o.typed){if(!o.issues){n=o;break}r?r.push(o):r=[o]}else i?i.push(o):i=[o]}if(n)return n;if(r){if(1===r.length)return r[0];Mt(this,"type",e,t,{issues:Qt(r)}),e.typed=!0}else{if(1===(null==i?void 0:i.length))return i[0];Mt(this,"type",e,t,{issues:Qt(i)})}return e}}}function en(){return{kind:"schema",type:"unknown",reference:en,expects:"unknown",async:!1,_run:e=>(e.typed=!0,e)}}function tn(e,t,n){const r=e._run({typed:!1,value:t},function(e){var t,n,r;return{lang:null!==(t=null==e?void 0:e.lang)&&void 0!==t?t:void 0,message:null==e?void 0:e.message,abortEarly:null!==(n=null==e?void 0:e.abortEarly)&&void 0!==n?n:void 0,abortPipeEarly:null!==(r=null==e?void 0:e.abortPipeEarly)&&void 0!==r?r:void 0}}(n));if(r.issues)throw new Bt(r.issues);return r.value}function nn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,i.A)((0,i.A)({},t[0]),{},{pipe:t,_run(e,n){for(let r=0;r<t.length;r++){if(e.issues&&("schema"===t[r].kind||"transformation"===t[r].kind)){e.typed=!1;break}(!e.issues||!n.abortEarly&&!n.abortPipeEarly)&&(e=t[r]._run(e,n))}return e}})}function rn(e){return nn(Xt(Object.entries(e).map(e=>{let[t,n]=e;return Gt({[t]:n})})),Rt(e=>(0,i.A)((0,i.A)({},e),{},{$kind:Object.keys(e)[0]})))}const sn=nn(Ht(),Rt(e=>(0,s.n)(e)),Ut(s.b)),on=sn,an=Ht(),cn=nn(Xt([Ht(),nn(Ft(),zt())]),Ut(e=>{try{return BigInt(e),BigInt(e)>=0&&BigInt(e)<=18446744073709551615n}catch(t){return!1}},"Invalid u64")),un=Gt({objectId:sn,version:cn,digest:Ht()}),ln=nn(Xt([Gt({GasCoin:Wt(!0)}),Gt({Input:nn(Ft(),zt()),type:Jt(Wt("pure"))}),Gt({Input:nn(Ft(),zt()),type:Jt(Wt("object"))}),Gt({Result:nn(Ft(),zt())}),Gt({NestedResult:Yt([nn(Ft(),zt()),nn(Ft(),zt())])})]),Rt(e=>(0,i.A)((0,i.A)({},e),{},{$kind:Object.keys(e)[0]}))),dn=Gt({budget:Kt(cn),price:Kt(cn),owner:Kt(sn),payment:Kt(Nt(un))}),hn=Xt([Wt("address"),Wt("bool"),Wt("u8"),Wt("u16"),Wt("u32"),Wt("u64"),Wt("u128"),Wt("u256"),Gt({vector:Lt(()=>hn)}),Gt({datatype:Gt({package:Ht(),module:Ht(),type:Ht(),typeParameters:Nt(Lt(()=>hn))})}),Gt({typeParameter:nn(Ft(),zt())})]),pn=Gt({ref:Kt(Xt([Wt("&"),Wt("&mut")])),body:hn}),gn=Gt({package:on,module:Ht(),function:Ht(),typeArguments:Nt(Ht()),arguments:Nt(ln),_argumentTypes:Jt(Kt(Nt(pn)))}),fn=Gt({name:Ht(),inputs:Zt(Ht(),Xt([ln,Nt(ln)])),data:Zt(Ht(),en())}),mn=rn({MoveCall:gn,TransferObjects:Gt({objects:Nt(ln),address:ln}),SplitCoins:Gt({coin:ln,amounts:Nt(ln)}),MergeCoins:Gt({destination:ln,sources:Nt(ln)}),Publish:Gt({modules:Nt(an),dependencies:Nt(on)}),MakeMoveVec:Gt({type:Kt(Ht()),elements:Nt(ln)}),Upgrade:Gt({modules:Nt(an),dependencies:Nt(on),package:on,ticket:ln}),$Intent:fn}),yn=rn({ImmOrOwnedObject:un,SharedObject:Gt({objectId:on,initialSharedVersion:cn,mutable:qt()}),Receiving:un}),vn=rn({Object:yn,Pure:Gt({bytes:an}),UnresolvedPure:Gt({value:en()}),UnresolvedObject:Gt({objectId:on,version:Jt(Kt(cn)),digest:Jt(Kt(Ht())),initialSharedVersion:Jt(Kt(cn))})}),bn=rn({Object:yn,Pure:Gt({bytes:an})}),wn=rn({None:Wt(!0),Epoch:cn}),kn=Gt({version:Wt(2),sender:$t(sn),expiration:$t(wn),gasData:dn,inputs:Nt(vn),commands:Nt(mn)}),Sn={MoveCall(e){var t,n;const[r,i="",s=""]="target"in e?e.target.split("::"):[e.package,e.module,e.function];return{$kind:"MoveCall",MoveCall:{package:r,module:i,function:s,typeArguments:null!==(t=e.typeArguments)&&void 0!==t?t:[],arguments:null!==(n=e.arguments)&&void 0!==n?n:[]}}},TransferObjects:(e,t)=>({$kind:"TransferObjects",TransferObjects:{objects:e.map(e=>tn(ln,e)),address:tn(ln,t)}}),SplitCoins:(e,t)=>({$kind:"SplitCoins",SplitCoins:{coin:tn(ln,e),amounts:t.map(e=>tn(ln,e))}}),MergeCoins:(e,t)=>({$kind:"MergeCoins",MergeCoins:{destination:tn(ln,e),sources:t.map(e=>tn(ln,e))}}),Publish(e){let{modules:t,dependencies:n}=e;return{$kind:"Publish",Publish:{modules:t.map(e=>"string"==typeof e?e:(0,s.t)(new Uint8Array(e))),dependencies:n.map(e=>(0,s.k)(e))}}},Upgrade(e){let{modules:t,dependencies:n,package:r,ticket:i}=e;return{$kind:"Upgrade",Upgrade:{modules:t.map(e=>"string"==typeof e?e:(0,s.t)(new Uint8Array(e))),dependencies:n.map(e=>(0,s.k)(e)),package:r,ticket:tn(ln,i)}}},MakeMoveVec(e){let{type:t,elements:n}=e;return{$kind:"MakeMoveVec",MakeMoveVec:{type:null!==t&&void 0!==t?t:null,elements:n.map(e=>tn(ln,e))}}},Intent(e){let{name:t,inputs:n={},data:r={}}=e;return{$kind:"$Intent",$Intent:{name:t,inputs:Object.fromEntries(Object.entries(n).map(e=>{let[t,n]=e;return[t,Array.isArray(n)?n.map(e=>tn(ln,e)):tn(ln,n)]})),data:r}}}},jn=Gt({digest:Ht(),objectId:Ht(),version:Xt([nn(Ft(),zt()),Ht(),Vt()])}),On=rn({ImmOrOwned:jn,Shared:Gt({objectId:on,initialSharedVersion:cn,mutable:qt()}),Receiving:jn}),In=rn({Object:On,Pure:Nt(nn(Ft(),zt()))}),En=Xt([Gt({kind:Wt("Input"),index:nn(Ft(),zt()),value:en(),type:Jt(Wt("object"))}),Gt({kind:Wt("Input"),index:nn(Ft(),zt()),value:en(),type:Wt("pure")})]),Cn=Xt([Gt({Epoch:nn(Ft(),zt())}),Gt({None:Kt(Wt(!0))})]),xn=nn(Xt([Ft(),Ht(),Vt()]),Ut(e=>{if(!["string","number","bigint"].includes(typeof e))return!1;try{return BigInt(e),!0}catch(t){return!1}})),An=Xt([Gt({bool:Kt(Wt(!0))}),Gt({u8:Kt(Wt(!0))}),Gt({u64:Kt(Wt(!0))}),Gt({u128:Kt(Wt(!0))}),Gt({address:Kt(Wt(!0))}),Gt({signer:Kt(Wt(!0))}),Gt({vector:Lt(()=>An)}),Gt({struct:Lt(()=>Tn)}),Gt({u16:Kt(Wt(!0))}),Gt({u32:Kt(Wt(!0))}),Gt({u256:Kt(Wt(!0))})]),Tn=Gt({address:Ht(),module:Ht(),name:Ht(),typeParams:Nt(An)}),Mn=Gt({budget:Jt(xn),price:Jt(xn),payment:Jt(Nt(jn)),owner:Jt(Ht())}),Pn=Xt([...[En,Gt({kind:Wt("GasCoin")}),Gt({kind:Wt("Result"),index:nn(Ft(),zt())}),Gt({kind:Wt("NestedResult"),index:nn(Ft(),zt()),resultIndex:nn(Ft(),zt())})]]),Bn=Gt({kind:Wt("MoveCall"),target:nn(Ht(),Ut(e=>3===e.split("::").length)),typeArguments:Nt(Ht()),arguments:Nt(Pn)}),Un=Gt({kind:Wt("TransferObjects"),objects:Nt(Pn),address:Pn}),zn=Gt({kind:Wt("SplitCoins"),coin:Pn,amounts:Nt(Pn)}),Rn=Gt({kind:Wt("MergeCoins"),destination:Pn,sources:Nt(Pn)}),_n=Gt({kind:Wt("MakeMoveVec"),type:Xt([Gt({Some:An}),Gt({None:Kt(Wt(!0))})]),objects:Nt(Pn)}),Dn=Xt([...[Bn,Un,zn,Rn,Gt({kind:Wt("Publish"),modules:Nt(Nt(nn(Ft(),zt()))),dependencies:Nt(Ht())}),Gt({kind:Wt("Upgrade"),modules:Nt(Nt(nn(Ft(),zt()))),dependencies:Nt(Ht()),packageId:Ht(),ticket:Pn}),_n]]);function Nn(e){var t,n,r,i,o,a;const c=e.inputs.map((e,t)=>{if(e.Object)return{kind:"Input",index:t,value:{Object:e.Object.ImmOrOwnedObject?{ImmOrOwned:e.Object.ImmOrOwnedObject}:e.Object.Receiving?{Receiving:{digest:e.Object.Receiving.digest,version:e.Object.Receiving.version,objectId:e.Object.Receiving.objectId}}:{Shared:{mutable:e.Object.SharedObject.mutable,initialSharedVersion:e.Object.SharedObject.initialSharedVersion,objectId:e.Object.SharedObject.objectId}}},type:"object"};if(e.Pure)return{kind:"Input",index:t,value:{Pure:Array.from((0,s.f)(e.Pure.bytes))},type:"pure"};if(e.UnresolvedPure)return{kind:"Input",type:"pure",index:t,value:e.UnresolvedPure.value};if(e.UnresolvedObject)return{kind:"Input",type:"object",index:t,value:e.UnresolvedObject.objectId};throw new Error("Invalid input")});return{version:1,sender:null!==(t=e.sender)&&void 0!==t?t:void 0,expiration:"Epoch"===(null==(a=e.expiration)?void 0:a.$kind)?{Epoch:Number(e.expiration.Epoch)}:e.expiration?{None:!0}:null,gasConfig:{owner:null!==(n=e.gasData.owner)&&void 0!==n?n:void 0,budget:null!==(r=e.gasData.budget)&&void 0!==r?r:void 0,price:null!==(i=e.gasData.price)&&void 0!==i?i:void 0,payment:null!==(o=e.gasData.payment)&&void 0!==o?o:void 0},inputs:c,transactions:e.commands.map(e=>{if(e.MakeMoveVec)return{kind:"MakeMoveVec",type:null===e.MakeMoveVec.type?{None:!0}:{Some:J.parseFromStr(e.MakeMoveVec.type)},objects:e.MakeMoveVec.elements.map(e=>Vn(e,c))};if(e.MergeCoins)return{kind:"MergeCoins",destination:Vn(e.MergeCoins.destination,c),sources:e.MergeCoins.sources.map(e=>Vn(e,c))};if(e.MoveCall)return{kind:"MoveCall",target:"".concat(e.MoveCall.package,"::").concat(e.MoveCall.module,"::").concat(e.MoveCall.function),typeArguments:e.MoveCall.typeArguments,arguments:e.MoveCall.arguments.map(e=>Vn(e,c))};if(e.Publish)return{kind:"Publish",modules:e.Publish.modules.map(e=>Array.from((0,s.f)(e))),dependencies:e.Publish.dependencies};if(e.SplitCoins)return{kind:"SplitCoins",coin:Vn(e.SplitCoins.coin,c),amounts:e.SplitCoins.amounts.map(e=>Vn(e,c))};if(e.TransferObjects)return{kind:"TransferObjects",objects:e.TransferObjects.objects.map(e=>Vn(e,c)),address:Vn(e.TransferObjects.address,c)};if(e.Upgrade)return{kind:"Upgrade",modules:e.Upgrade.modules.map(e=>Array.from((0,s.f)(e))),dependencies:e.Upgrade.dependencies,packageId:e.Upgrade.package,ticket:Vn(e.Upgrade.ticket,c)};throw new Error("Unknown transaction ".concat(Object.keys(e)))})}}function Vn(e,t){if("GasCoin"===e.$kind)return{kind:"GasCoin"};if("Result"===e.$kind)return{kind:"Result",index:e.Result};if("NestedResult"===e.$kind)return{kind:"NestedResult",index:e.NestedResult[0],resultIndex:e.NestedResult[1]};if("Input"===e.$kind)return t[e.Input];throw new Error("Invalid argument ".concat(Object.keys(e)))}function qn(e){switch(e.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:e.index};case"NestedResult":return{NestedResult:[e.index,e.resultIndex]};case"Input":return{Input:e.index}}}function Ln(e){return Xt(Object.entries(e).map(e=>{let[t,n]=e;return Gt({[t]:n})}))}Gt({version:Wt(1),sender:Jt(Ht()),expiration:$t(Cn),gasConfig:Mn,inputs:Nt(En),transactions:Nt(Dn)});const Wn=Ln({GasCoin:Wt(!0),Input:nn(Ft(),zt()),Result:nn(Ft(),zt()),NestedResult:Yt([nn(Ft(),zt()),nn(Ft(),zt())])}),Kn=Gt({budget:Kt(cn),price:Kt(cn),owner:Kt(sn),payment:Kt(Nt(un))}),$n=Gt({package:on,module:Ht(),function:Ht(),typeArguments:Nt(Ht()),arguments:Nt(Wn)}),Fn=Gt({name:Ht(),inputs:Zt(Ht(),Xt([Wn,Nt(Wn)])),data:Zt(Ht(),en())}),Gn=Ln({MoveCall:$n,TransferObjects:Gt({objects:Nt(Wn),address:Wn}),SplitCoins:Gt({coin:Wn,amounts:Nt(Wn)}),MergeCoins:Gt({destination:Wn,sources:Nt(Wn)}),Publish:Gt({modules:Nt(an),dependencies:Nt(on)}),MakeMoveVec:Gt({type:Kt(Ht()),elements:Nt(Wn)}),Upgrade:Gt({modules:Nt(an),dependencies:Nt(on),package:on,ticket:Wn}),$Intent:Fn}),Jn=Ln({ImmOrOwnedObject:un,SharedObject:Gt({objectId:on,initialSharedVersion:cn,mutable:qt()}),Receiving:un}),Zn=Ln({Object:Jn,Pure:Gt({bytes:an}),UnresolvedPure:Gt({value:en()}),UnresolvedObject:Gt({objectId:on,version:Jt(Kt(cn)),digest:Jt(Kt(Ht())),initialSharedVersion:Jt(Kt(cn))})}),Hn=Ln({None:Wt(!0),Epoch:cn}),Yn=Gt({version:Wt(2),sender:$t(sn),expiration:$t(Hn),gasData:Kn,inputs:Nt(Zn),commands:Nt(Gn)}),Qn=5e10;async function Xn(e,t,n){return await async function(e,t){const{inputs:n,commands:r}=e,i=[],o=new Set;r.forEach(t=>{if(t.MoveCall){if(t.MoveCall._argumentTypes)return;if(t.MoveCall.arguments.map(t=>"Input"===t.$kind?e.inputs[t.Input]:null).some(e=>(null==e?void 0:e.UnresolvedPure)||(null==e?void 0:e.UnresolvedObject))){const e="".concat(t.MoveCall.package,"::").concat(t.MoveCall.module,"::").concat(t.MoveCall.function);o.add(e),i.push(t.MoveCall)}}switch(t.$kind){case"SplitCoins":t.SplitCoins.amounts.forEach(t=>{er(t,Ge.U64,e)});break;case"TransferObjects":er(t.TransferObjects.address,Ge.Address,e)}});const a=new Map;if(o.size>0){const e=rr(t);await Promise.all([...o].map(async t=>{const[n,r,i]=t.split("::"),s=await e.getNormalizedMoveFunction({package:n,module:r,function:i});a.set(t,s.parameters.map(e=>function(e){return"object"==typeof e&&"Reference"in e?{ref:"&",body:xt(e.Reference)}:"object"==typeof e&&"MutableReference"in e?{ref:"&mut",body:xt(e.MutableReference)}:{ref:null,body:xt(e)}}(e)))}))}i.length&&await Promise.all(i.map(async e=>{const t=a.get("".concat(e.package,"::").concat(e.module,"::").concat(e.function));if(!t)return;const n=t.length>0&&function(e){const t="object"==typeof e.body&&"datatype"in e.body?e.body.datatype:null;return!!t&&(0,s.n)(t.package)===(0,s.n)("0x2")&&"tx_context"===t.module&&"TxContext"===t.type}(t.at(-1))?t.slice(0,t.length-1):t;e._argumentTypes=n})),r.forEach(e=>{if(!e.MoveCall)return;const t=e.MoveCall,r="".concat(t.package,"::").concat(t.module,"::").concat(t.function),i=t._argumentTypes;if(i){if(i.length!==e.MoveCall.arguments.length)throw new Error("Incorrect number of arguments for ".concat(r));i.forEach((e,r)=>{var i,s,o;const a=t.arguments[r];if("Input"!==a.$kind)return;const c=n[a.Input];if(!c.UnresolvedPure&&!c.UnresolvedObject)return;const u=null!==(i=null==(s=c.UnresolvedPure)?void 0:s.value)&&void 0!==i?i:null==(o=c.UnresolvedObject)?void 0:o.objectId,l=Ct(e.body);if(l)return a.type="pure",void(n[n.indexOf(c)]=At.Pure(l.serialize(u)));if("string"!=typeof u)throw new Error("Expect the argument to be an object id string, got ".concat(JSON.stringify(u,null,2)));a.type="object";const d=c.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:u}}:c;n[a.Input]=d})}})}(e,t),await async function(e,t){const n=e.inputs.filter(e=>{var t;return e.UnresolvedObject&&!(e.UnresolvedObject.version||null!=(t=e.UnresolvedObject)&&t.initialSharedVersion)}),r=[...new Set(n.map(e=>(0,s.k)(e.UnresolvedObject.objectId)))],i=r.length?function(e,t){return Array.from({length:Math.ceil(e.length/t)},(n,r)=>e.slice(r*t,r*t+t))}(r,50):[],o=(await Promise.all(i.map(e=>rr(t).multiGetObjects({ids:e,options:{showOwner:!0}})))).flat(),a=new Map(r.map((e,t)=>[e,o[t]])),c=Array.from(a).filter(e=>{let[t,n]=e;return n.error}).map(e=>{let[t,n]=e;return JSON.stringify(n.error)});if(c.length)throw new Error("The following input objects are invalid: ".concat(c.join(", ")));const u=o.map(e=>{if(e.error||!e.data)throw new Error("Failed to fetch object: ".concat(e.error));const t=e.data.owner,n=t&&"object"==typeof t&&"Shared"in t?t.Shared.initial_shared_version:null;return{objectId:e.data.objectId,digest:e.data.digest,version:e.data.version,initialSharedVersion:n}}),l=new Map(r.map((e,t)=>[e,u[t]]));for(const[m,y]of e.inputs.entries()){var d,h,p,g,f;if(!y.UnresolvedObject)continue;let t;const n=(0,s.n)(y.UnresolvedObject.objectId),r=l.get(n);(null!==(d=y.UnresolvedObject.initialSharedVersion)&&void 0!==d?d:null==r?void 0:r.initialSharedVersion)?t=At.SharedObjectRef({objectId:n,initialSharedVersion:y.UnresolvedObject.initialSharedVersion||(null==r?void 0:r.initialSharedVersion),mutable:tr(e,m)}):nr(e,m)&&(t=At.ReceivingRef({objectId:n,digest:null!==(h=y.UnresolvedObject.digest)&&void 0!==h?h:null==r?void 0:r.digest,version:null!==(p=y.UnresolvedObject.version)&&void 0!==p?p:null==r?void 0:r.version})),e.inputs[e.inputs.indexOf(y)]=null!==t&&void 0!==t?t:At.ObjectRef({objectId:n,digest:null!==(g=y.UnresolvedObject.digest)&&void 0!==g?g:null==r?void 0:r.digest,version:null!==(f=y.UnresolvedObject.version)&&void 0!==f?f:null==r?void 0:r.version})}}(e,t),t.onlyTransactionKind||(await async function(e,t){e.gasConfig.price||(e.gasConfig.price=String(await rr(t).getReferenceGasPrice()))}(e,t),await async function(e,t){if(e.gasConfig.budget)return;const n=await rr(t).dryRunTransactionBlock({transactionBlock:e.build({overrides:{gasData:{budget:String(Qn),payment:[]}}})});if("success"!==n.effects.status.status)throw new Error("Dry run failed, could not automatically determine a budget: ".concat(n.effects.status.error),{cause:n});const r=1000n*BigInt(e.gasConfig.price||1n),i=BigInt(n.effects.gasUsed.computationCost)+r,s=i+BigInt(n.effects.gasUsed.storageCost)-BigInt(n.effects.gasUsed.storageRebate);e.gasConfig.budget=String(s>i?s:i)}(e,t),await async function(e,t){if(!e.gasConfig.payment){const n=(await rr(t).getCoins({owner:e.gasConfig.owner||e.sender,coinType:$})).data.filter(t=>!e.inputs.find(e=>{var n;return!(null==(n=e.Object)||!n.ImmOrOwnedObject)&&t.coinObjectId===e.Object.ImmOrOwnedObject.objectId})).map(e=>({objectId:e.coinObjectId,digest:e.digest,version:e.version}));if(!n.length)throw new Error("No valid gas coins found for the transaction.");e.gasConfig.payment=n.map(e=>tn(un,e))}}(e,t)),await function(e){e.inputs.forEach((e,t)=>{if("Object"!==e.$kind&&"Pure"!==e.$kind)throw new Error("Input at index ".concat(t," has not been resolved.  Expected a Pure or Object input, but found ").concat(JSON.stringify(e)))})}(e),await n()}function er(e,t,n){if("Input"!==e.$kind)return;const r=n.inputs[e.Input];"UnresolvedPure"===r.$kind&&(n.inputs[e.Input]=At.Pure(t.serialize(r.UnresolvedPure.value)))}function tr(e,t){let n=!1;return e.getInputUses(t,(e,t)=>{if(t.MoveCall&&t.MoveCall._argumentTypes){const r=t.MoveCall.arguments.indexOf(e);n="&"!==t.MoveCall._argumentTypes[r].ref||n}("MakeMoveVec"===t.$kind||"MergeCoins"===t.$kind||"SplitCoins"===t.$kind)&&(n=!0)}),n}function nr(e,t){let n=!1;return e.getInputUses(t,(e,t)=>{if(t.MoveCall&&t.MoveCall._argumentTypes){const r=t.MoveCall.arguments.indexOf(e);n=function(e){return"object"==typeof e.body&&"datatype"in e.body&&("0x2"===e.body.datatype.package&&"transfer"===e.body.datatype.module&&"Receiving"===e.body.datatype.type)}(t.MoveCall._argumentTypes[r])||n}}),n}function rr(e){if(!e.client)throw new Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return e.client}function ir(e){function t(t,n){if("string"==typeof t)return e(Fe(t).serialize(n));if(t instanceof Uint8Array||R(t))return e(t);throw new Error("tx.pure must be called either a bcs type name, or a serialized bcs value")}return t.u8=t=>e(Ge.U8.serialize(t)),t.u16=t=>e(Ge.U16.serialize(t)),t.u32=t=>e(Ge.U32.serialize(t)),t.u64=t=>e(Ge.U64.serialize(t)),t.u128=t=>e(Ge.U128.serialize(t)),t.u256=t=>e(Ge.U256.serialize(t)),t.bool=t=>e(Ge.Bool.serialize(t)),t.string=t=>e(Ge.String.serialize(t)),t.address=t=>e(Ge.Address.serialize(t)),t.id=t.address,t.vector=(t,n)=>e(Ge.vector(Fe(t)).serialize(n)),t.option=(t,n)=>e(Ge.option(Fe(t)).serialize(n)),t}function sr(e){return(0,s.n)(e).replace("0x","")}class or{constructor(e){var t,n,r,i,s;this.version=2,this.sender=null!==(t=null==e?void 0:e.sender)&&void 0!==t?t:null,this.expiration=null!==(n=null==e?void 0:e.expiration)&&void 0!==n?n:null,this.inputs=null!==(r=null==e?void 0:e.inputs)&&void 0!==r?r:[],this.commands=null!==(i=null==e?void 0:e.commands)&&void 0!==i?i:[],this.gasData=null!==(s=null==e?void 0:e.gasData)&&void 0!==s?s:{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(e){const t=Ge.TransactionKind.parse(e).ProgrammableTransaction;if(!t)throw new Error("Unable to deserialize from bytes.");return or.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:t.inputs,commands:t.commands})}static fromBytes(e){const t=Ge.TransactionData.parse(e),n=null==t?void 0:t.V1,r=n.kind.ProgrammableTransaction;if(!n||!r)throw new Error("Unable to deserialize from bytes.");return or.restore({version:2,sender:n.sender,expiration:n.expiration,gasData:n.gasData,inputs:r.inputs,commands:r.commands})}static restore(e){return 2===e.version?new or(tn(kn,e)):new or(tn(kn,function(e){var t,n,r,i,o,a,c,u;return tn(kn,{version:2,sender:null!==(t=e.sender)&&void 0!==t?t:null,expiration:e.expiration?"Epoch"in e.expiration?{Epoch:e.expiration.Epoch}:{None:!0}:null,gasData:{owner:null!==(n=e.gasConfig.owner)&&void 0!==n?n:null,budget:null!==(r=null==(a=e.gasConfig.budget)?void 0:a.toString())&&void 0!==r?r:null,price:null!==(i=null==(c=e.gasConfig.price)?void 0:c.toString())&&void 0!==i?i:null,payment:null!==(o=null==(u=e.gasConfig.payment)?void 0:u.map(e=>({digest:e.digest,objectId:e.objectId,version:e.version.toString()})))&&void 0!==o?o:null},inputs:e.inputs.map(e=>{if("Input"===e.kind){if(Dt(In,e.value)){const n=tn(In,e.value);if(n.Object){var t;if(n.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:n.Object.ImmOrOwned.objectId,version:String(n.Object.ImmOrOwned.version),digest:n.Object.ImmOrOwned.digest}}};if(n.Object.Shared)return{Object:{SharedObject:{mutable:null!==(t=n.Object.Shared.mutable)&&void 0!==t?t:null,initialSharedVersion:n.Object.Shared.initialSharedVersion,objectId:n.Object.Shared.objectId}}};if(n.Object.Receiving)return{Object:{Receiving:{digest:n.Object.Receiving.digest,version:String(n.Object.Receiving.version),objectId:n.Object.Receiving.objectId}}};throw new Error("Invalid object input")}return{Pure:{bytes:(0,s.t)(new Uint8Array(n.Pure))}}}return"object"===e.type?{UnresolvedObject:{objectId:e.value}}:{UnresolvedPure:{value:e.value}}}throw new Error("Invalid input")}),commands:e.transactions.map(e=>{switch(e.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in e.type?J.tagToString(e.type.Some):null,elements:e.objects.map(e=>qn(e))}};case"MergeCoins":return{MergeCoins:{destination:qn(e.destination),sources:e.sources.map(e=>qn(e))}};case"MoveCall":{const[t,n,r]=e.target.split("::");return{MoveCall:{package:t,module:n,function:r,typeArguments:e.typeArguments,arguments:e.arguments.map(e=>qn(e))}}}case"Publish":return{Publish:{modules:e.modules.map(e=>(0,s.t)(Uint8Array.from(e))),dependencies:e.dependencies}};case"SplitCoins":return{SplitCoins:{coin:qn(e.coin),amounts:e.amounts.map(e=>qn(e))}};case"TransferObjects":return{TransferObjects:{objects:e.objects.map(e=>qn(e)),address:qn(e.address)}};case"Upgrade":return{Upgrade:{modules:e.modules.map(e=>(0,s.t)(Uint8Array.from(e))),dependencies:e.dependencies,package:e.packageId,ticket:qn(e.ticket)}}}throw new Error("Unknown transaction ".concat(Object.keys(e)))})})}(e)))}static getDigestFromBytes(e){const t=function(e,t){const n=Array.from("".concat(e,"::")).map(e=>e.charCodeAt(0)),r=new Uint8Array(n.length+t.length);return r.set(n),r.set(t,n.length),(0,o.b)(r,{dkLen:32})}("TransactionData",e);return(0,s.j)(t)}get gasConfig(){return this.gasData}set gasConfig(e){this.gasData=e}build(){var e,t,n;let{maxSizeBytes:r=1/0,overrides:s,onlyTransactionKind:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=this.inputs,c=this.commands,u={ProgrammableTransaction:{inputs:a,commands:c}};if(o)return Ge.TransactionKind.serialize(u,{maxSize:r}).toBytes();const l=null!==(e=null==s?void 0:s.expiration)&&void 0!==e?e:this.expiration,d=null!==(t=null==s?void 0:s.sender)&&void 0!==t?t:this.sender,h=(0,i.A)((0,i.A)((0,i.A)({},this.gasData),null==s?void 0:s.gasConfig),null==s?void 0:s.gasData);if(!d)throw new Error("Missing transaction sender");if(!h.budget)throw new Error("Missing gas budget");if(!h.payment)throw new Error("Missing gas payment");if(!h.price)throw new Error("Missing gas price");const p={sender:sr(d),expiration:l||{None:!0},gasData:{payment:h.payment,owner:sr(null!==(n=this.gasData.owner)&&void 0!==n?n:d),price:BigInt(h.price),budget:BigInt(h.budget)},kind:{ProgrammableTransaction:{inputs:a,commands:c}}};return Ge.TransactionData.serialize({V1:p},{maxSize:r}).toBytes()}addInput(e,t){const n=this.inputs.length;return this.inputs.push(t),{Input:n,type:e,$kind:"Input"}}getInputUses(e,t){this.mapArguments((n,r)=>("Input"===n.$kind&&n.Input===e&&t(n,r),n))}mapArguments(e){for(const t of this.commands)switch(t.$kind){case"MoveCall":t.MoveCall.arguments=t.MoveCall.arguments.map(n=>e(n,t));break;case"TransferObjects":t.TransferObjects.objects=t.TransferObjects.objects.map(n=>e(n,t)),t.TransferObjects.address=e(t.TransferObjects.address,t);break;case"SplitCoins":t.SplitCoins.coin=e(t.SplitCoins.coin,t),t.SplitCoins.amounts=t.SplitCoins.amounts.map(n=>e(n,t));break;case"MergeCoins":t.MergeCoins.destination=e(t.MergeCoins.destination,t),t.MergeCoins.sources=t.MergeCoins.sources.map(n=>e(n,t));break;case"MakeMoveVec":t.MakeMoveVec.elements=t.MakeMoveVec.elements.map(n=>e(n,t));break;case"Upgrade":t.Upgrade.ticket=e(t.Upgrade.ticket,t);break;case"$Intent":const n=t.$Intent.inputs;t.$Intent.inputs={};for(const[r,i]of Object.entries(n))t.$Intent.inputs[r]=Array.isArray(i)?i.map(n=>e(n,t)):e(i,t);break;case"Publish":break;default:throw new Error("Unexpected transaction kind: ".concat(t.$kind))}}replaceCommand(e,t){if(!Array.isArray(t))return void(this.commands[e]=t);const n=t.length-1;this.commands.splice(e,1,...t),0!==n&&this.mapArguments(t=>{switch(t.$kind){case"Result":t.Result>e&&(t.Result+=n);break;case"NestedResult":t.NestedResult[0]>e&&(t.NestedResult[0]+=n)}return t})}getDigest(){const e=this.build({onlyTransactionKind:!1});return or.getDigestFromBytes(e)}snapshot(){return tn(kn,this)}}function ar(e){return"string"==typeof e?(0,s.n)(e):e.Object?e.Object.ImmOrOwnedObject?(0,s.n)(e.Object.ImmOrOwnedObject.objectId):e.Object.Receiving?(0,s.n)(e.Object.Receiving.objectId):(0,s.n)(e.Object.SharedObject.objectId):e.UnresolvedObject?(0,s.n)(e.UnresolvedObject.objectId):void 0}var cr,ur,lr,dr,hr,pr,gr,fr,mr,yr=e=>{throw TypeError(e)},vr=(e,t,n)=>t.has(e)||yr("Cannot "+n),br=(e,t,n)=>(vr(e,t,"read from private field"),n?n.call(e):t.get(e)),wr=(e,t,n)=>t.has(e)?yr("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),kr=(e,t,n,r)=>(vr(e,t,"write to private field"),t.set(e,n),n),Sr=(e,t,n)=>(vr(e,t,"access private method"),n);function jr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;const n=[],r=t=>{var r;return null!==(r=n[t])&&void 0!==r?r:n[t]={$kind:"NestedResult",NestedResult:[e,t]}};return new Proxy({$kind:"Result",Result:e},{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(e,n){if(n in e)return Reflect.get(e,n);if(n===Symbol.iterator)return function*(){let e=0;for(;e<t;)yield r(e),e++};if("symbol"==typeof n)return;const i=parseInt(n,10);return Number.isNaN(i)||i<0?void 0:r(i)}})}const Or=Symbol.for("@mysten/transaction");function Ir(e){return!!e&&"object"==typeof e&&!0===e[Or]}const Er={buildPlugins:new Map,serializationPlugins:new Map},Cr=Symbol.for("@mysten/transaction/registry");function xr(){try{const e=globalThis;return e[Cr]||(e[Cr]=Er),e[Cr]}catch(e){return Er}}cr=new WeakMap,ur=new WeakMap,lr=new WeakMap,dr=new WeakMap,hr=new WeakSet,pr=function(e){return R(e)?this.pure(e):Sr(this,hr,gr).call(this,e)},gr=function(e){return tn(ln,"function"==typeof e?e(this):e)},fr=async function(e){if(!e.onlyTransactionKind&&!br(this,dr).sender)throw new Error("Missing transaction sender");await Sr(this,hr,mr).call(this,[...br(this,ur),Xn],e)},mr=async function(e,t){const n=r=>{if(r>=e.length)return()=>{};const i=e[r];return async()=>{const e=n(r+1);let s=!1,o=!1;if(await i(br(this,dr),t,async()=>{if(s)throw new Error("next() was call multiple times in TransactionPlugin ".concat(r));s=!0,await e(),o=!0}),!s)throw new Error("next() was not called in TransactionPlugin ".concat(r));if(!o)throw new Error("next() was not awaited in TransactionPlugin ".concat(r))}};await n(0)()};let Ar=class e{constructor(){wr(this,hr),wr(this,cr),wr(this,ur),wr(this,lr,new Map),wr(this,dr),this.object=function(e){function t(t){return e(t)}return t.system=()=>t("0x5"),t.clock=()=>t("0x6"),t.random=()=>t("0x8"),t.denyList=()=>t("0x403"),t.option=e=>{let{type:t,value:n}=e;return e=>e.moveCall({typeArguments:[t],target:"0x1::option::".concat(null===n?"none":"some"),arguments:null===n?[]:[e.object(n)]})},t}(e=>{var t,n;if("function"==typeof e)return this.object(e(this));if("object"==typeof e&&Dt(ln,e))return e;const r=ar(e),i=br(this,dr).inputs.find(e=>r===ar(e));return null!=(t=null==i?void 0:i.Object)&&t.SharedObject&&"object"==typeof e&&null!=(n=e.Object)&&n.SharedObject&&(i.Object.SharedObject.mutable=i.Object.SharedObject.mutable||e.Object.SharedObject.mutable),i?{$kind:"Input",Input:br(this,dr).inputs.indexOf(i),type:"object"}:br(this,dr).addInput("object","string"==typeof e?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:(0,s.n)(e)}}:e)});const e=xr();kr(this,dr,new or),kr(this,ur,[...e.buildPlugins.values()]),kr(this,cr,[...e.serializationPlugins.values()])}static fromKind(t){const n=new e;return kr(n,dr,or.fromKindBytes("string"==typeof t?(0,s.f)(t):t)),n}static from(t){const n=new e;return Ir(t)?kr(n,dr,new or(t.getData())):"string"==typeof t&&t.startsWith("{")?kr(n,dr,or.restore(JSON.parse(t))):kr(n,dr,or.fromBytes("string"==typeof t?(0,s.f)(t):t)),n}static registerGlobalSerializationPlugin(e,t){xr().serializationPlugins.set(e,null!==t&&void 0!==t?t:e)}static unregisterGlobalSerializationPlugin(e){xr().serializationPlugins.delete(e)}static registerGlobalBuildPlugin(e,t){xr().buildPlugins.set(e,null!==t&&void 0!==t?t:e)}static unregisterGlobalBuildPlugin(e){xr().buildPlugins.delete(e)}addSerializationPlugin(e){br(this,cr).push(e)}addBuildPlugin(e){br(this,ur).push(e)}addIntentResolver(e,t){if(br(this,lr).has(e)&&br(this,lr).get(e)!==t)throw new Error("Intent resolver for ".concat(e," already exists"));br(this,lr).set(e,t)}setSender(e){br(this,dr).sender=e}setSenderIfNotSet(e){br(this,dr).sender||(br(this,dr).sender=e)}setExpiration(e){br(this,dr).expiration=e?tn(wn,e):null}setGasPrice(e){br(this,dr).gasConfig.price=String(e)}setGasBudget(e){br(this,dr).gasConfig.budget=String(e)}setGasBudgetIfNotSet(e){null==br(this,dr).gasData.budget&&(br(this,dr).gasConfig.budget=String(e))}setGasOwner(e){br(this,dr).gasConfig.owner=e}setGasPayment(e){br(this,dr).gasConfig.payment=e.map(e=>tn(un,e))}get blockData(){return Nn(br(this,dr).snapshot())}getData(){return br(this,dr).snapshot()}get[Or](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:ir(e=>R(e)?br(this,dr).addInput("pure",{$kind:"Pure",Pure:{bytes:e.toBase64()}}):br(this,dr).addInput("pure",Dt(bn,e)?tn(bn,e):e instanceof Uint8Array?At.Pure(e):{$kind:"UnresolvedPure",UnresolvedPure:{value:e}}))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}objectRef(){return this.object(At.ObjectRef(...arguments))}receivingRef(){return this.object(At.ReceivingRef(...arguments))}sharedObjectRef(){return this.object(At.SharedObjectRef(...arguments))}add(e){if("function"==typeof e)return e(this);return jr(br(this,dr).commands.push(e)-1)}splitCoins(e,t){const n=Sn.SplitCoins("string"==typeof e?this.object(e):Sr(this,hr,gr).call(this,e),t.map(e=>"number"==typeof e||"bigint"==typeof e||"string"==typeof e?this.pure.u64(e):Sr(this,hr,pr).call(this,e)));return jr(br(this,dr).commands.push(n)-1,t.length)}mergeCoins(e,t){return this.add(Sn.MergeCoins(this.object(e),t.map(e=>this.object(e))))}publish(e){let{modules:t,dependencies:n}=e;return this.add(Sn.Publish({modules:t,dependencies:n}))}upgrade(e){let{modules:t,dependencies:n,package:r,ticket:i}=e;return this.add(Sn.Upgrade({modules:t,dependencies:n,package:r,ticket:this.object(i)}))}moveCall(e){let{arguments:t}=e,n=(0,r.A)(e,g);return this.add(Sn.MoveCall((0,i.A)((0,i.A)({},n),{},{arguments:null==t?void 0:t.map(e=>Sr(this,hr,pr).call(this,e))})))}transferObjects(e,t){return this.add(Sn.TransferObjects(e.map(e=>this.object(e)),"string"==typeof t?this.pure.address(t):Sr(this,hr,pr).call(this,t)))}makeMoveVec(e){let{type:t,elements:n}=e;return this.add(Sn.MakeMoveVec({type:t,elements:n.map(e=>this.object(e))}))}serialize(){return JSON.stringify(Nn(br(this,dr).snapshot()))}async toJSON(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.prepareForSerialization(e),JSON.stringify(tn(Yn,br(this,dr).snapshot()),(e,t)=>"bigint"==typeof t?t.toString():t,2)}async sign(e){const{signer:t}=e,n=(0,r.A)(e,f),i=await this.build(n);return t.signTransaction(i)}async build(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.prepareForSerialization(e),await Sr(this,hr,fr).call(this,e),br(this,dr).build({onlyTransactionKind:e.onlyTransactionKind})}async getDigest(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await Sr(this,hr,fr).call(this,e),br(this,dr).getDigest()}async prepareForSerialization(e){var t;const n=new Set;for(const i of br(this,dr).commands)i.$Intent&&n.add(i.$Intent.name);const r=[...br(this,cr)];for(const i of n)if(null==(t=e.supportedIntents)||!t.includes(i)){if(!br(this,lr).has(i))throw new Error("Missing intent resolver for ".concat(i));r.push(br(this,lr).get(i))}await Sr(this,hr,mr).call(this,r,e)}};const Tr=Symbol.for("@mysten/SuiClient");class Mr{get[Tr](){return!0}constructor(e){var t;this.transport=null!==(t=e.transport)&&void 0!==t?t:new Et({url:e.url})}async getRpcApiVersion(){return(await this.transport.request({method:"rpc.discover",params:[]})).info.version}async getCoins(e){if(!e.owner||!(0,s.b)((0,s.n)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[e.owner,e.coinType,e.cursor,e.limit]})}async getAllCoins(e){if(!e.owner||!(0,s.b)((0,s.n)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[e.owner,e.cursor,e.limit]})}async getBalance(e){if(!e.owner||!(0,s.b)((0,s.n)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[e.owner,e.coinType]})}async getAllBalances(e){if(!e.owner||!(0,s.b)((0,s.n)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[e.owner]})}async getCoinMetadata(e){return await this.transport.request({method:"suix_getCoinMetadata",params:[e.coinType]})}async getTotalSupply(e){return await this.transport.request({method:"suix_getTotalSupply",params:[e.coinType]})}async call(e,t){return await this.transport.request({method:e,params:t})}async getMoveFunctionArgTypes(e){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[e.package,e.module,e.function]})}async getNormalizedMoveModulesByPackage(e){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[e.package]})}async getNormalizedMoveModule(e){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[e.package,e.module]})}async getNormalizedMoveFunction(e){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[e.package,e.module,e.function]})}async getNormalizedMoveStruct(e){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[e.package,e.module,e.struct]})}async getOwnedObjects(e){if(!e.owner||!(0,s.b)((0,s.n)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[e.owner,{filter:e.filter,options:e.options},e.cursor,e.limit]})}async getObject(e){if(!e.id||!(0,s.l)((0,s.k)(e.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[e.id,e.options]})}async tryGetPastObject(e){return await this.transport.request({method:"sui_tryGetPastObject",params:[e.id,e.version,e.options]})}async multiGetObjects(e){if(e.ids.forEach(e=>{if(!e||!(0,s.l)((0,s.k)(e)))throw new Error("Invalid Sui Object id ".concat(e))}),e.ids.length!==new Set(e.ids).size)throw new Error("Duplicate object ids in batch call ".concat(e.ids));return await this.transport.request({method:"sui_multiGetObjects",params:[e.ids,e.options]})}async queryTransactionBlocks(e){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:e.filter,options:e.options},e.cursor,e.limit,"descending"===(e.order||"descending")]})}async getTransactionBlock(e){if(!(0,s.a)(e.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[e.digest,e.options]})}async multiGetTransactionBlocks(e){if(e.digests.forEach(e=>{if(!(0,s.a)(e))throw new Error("Invalid Transaction digest ".concat(e))}),e.digests.length!==new Set(e.digests).size)throw new Error("Duplicate digests in batch call ".concat(e.digests));return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[e.digests,e.options]})}async executeTransactionBlock(e){let{transactionBlock:t,signature:n,options:r,requestType:i}=e;const o=await this.transport.request({method:"sui_executeTransactionBlock",params:["string"==typeof t?t:(0,s.t)(t),Array.isArray(n)?n:[n],r]});if("WaitForLocalExecution"===i)try{await this.waitForTransaction({digest:o.digest})}catch(a){}return o}async signAndExecuteTransaction(e){let t,{transaction:n,signer:s}=e,o=(0,r.A)(e,m);n instanceof Uint8Array?t=n:(n.setSenderIfNotSet(s.toSuiAddress()),t=await n.build({client:this}));const{signature:a,bytes:c}=await s.signTransaction(t);return this.executeTransactionBlock((0,i.A)({transactionBlock:c,signature:a},o))}async getTotalTransactionBlocks(){const e=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[]});return BigInt(e)}async getReferenceGasPrice(){const e=await this.transport.request({method:"suix_getReferenceGasPrice",params:[]});return BigInt(e)}async getStakes(e){if(!e.owner||!(0,s.b)((0,s.n)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[e.owner]})}async getStakesByIds(e){return e.stakedSuiIds.forEach(e=>{if(!e||!(0,s.l)((0,s.k)(e)))throw new Error("Invalid Sui Stake id ".concat(e))}),await this.transport.request({method:"suix_getStakesByIds",params:[e.stakedSuiIds]})}async getLatestSuiSystemState(){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[]})}async queryEvents(e){return await this.transport.request({method:"suix_queryEvents",params:[e.query,e.cursor,e.limit,"descending"===(e.order||"descending")]})}async subscribeEvent(e){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[e.filter],onMessage:e.onMessage})}async subscribeTransaction(e){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[e.filter],onMessage:e.onMessage})}async devInspectTransactionBlock(e){var t;let n;if(Ir(e.transactionBlock))e.transactionBlock.setSenderIfNotSet(e.sender),n=(0,s.t)(await e.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if("string"==typeof e.transactionBlock)n=e.transactionBlock;else{if(!(e.transactionBlock instanceof Uint8Array))throw new Error("Unknown transaction block format.");n=(0,s.t)(e.transactionBlock)}return await this.transport.request({method:"sui_devInspectTransactionBlock",params:[e.sender,n,null==(t=e.gasPrice)?void 0:t.toString(),e.epoch]})}async dryRunTransactionBlock(e){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:["string"==typeof e.transactionBlock?e.transactionBlock:(0,s.t)(e.transactionBlock)]})}async getDynamicFields(e){if(!e.parentId||!(0,s.l)((0,s.k)(e.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[e.parentId,e.cursor,e.limit]})}async getDynamicFieldObject(e){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[e.parentId,e.name]})}async getLatestCheckpointSequenceNumber(){const e=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[]});return String(e)}async getCheckpoint(e){return await this.transport.request({method:"sui_getCheckpoint",params:[e.id]})}async getCheckpoints(e){return await this.transport.request({method:"sui_getCheckpoints",params:[e.cursor,null==e?void 0:e.limit,e.descendingOrder]})}async getCommitteeInfo(e){return await this.transport.request({method:"suix_getCommitteeInfo",params:[null==e?void 0:e.epoch]})}async getNetworkMetrics(){return await this.transport.request({method:"suix_getNetworkMetrics",params:[]})}async getAddressMetrics(){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[]})}async getEpochMetrics(e){return await this.transport.request({method:"suix_getEpochMetrics",params:[null==e?void 0:e.cursor,null==e?void 0:e.limit,null==e?void 0:e.descendingOrder]})}async getAllEpochAddressMetrics(e){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[null==e?void 0:e.descendingOrder]})}async getEpochs(e){return await this.transport.request({method:"suix_getEpochs",params:[null==e?void 0:e.cursor,null==e?void 0:e.limit,null==e?void 0:e.descendingOrder]})}async getMoveCallMetrics(){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[]})}async getCurrentEpoch(){return await this.transport.request({method:"suix_getCurrentEpoch",params:[]})}async getValidatorsApy(){return await this.transport.request({method:"suix_getValidatorsApy",params:[]})}async getChainIdentifier(){const e=await this.getCheckpoint({id:"0"}),t=(0,s.h)(e.digest);return(0,s.d)(t.slice(0,4))}async resolveNameServiceAddress(e){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[e.name]})}async resolveNameServiceNames(e){let{format:t="dot"}=e,n=(0,r.A)(e,y);const{nextCursor:i,hasNextPage:s,data:o}=await this.transport.request({method:"suix_resolveNameServiceNames",params:[n.address,n.cursor,n.limit]});return{hasNextPage:s,nextCursor:i,data:o.map(e=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"at";const n=e.toLowerCase();let r;if(n.includes("@")){if(!L.test(n))throw new Error("Invalid SuiNS name ".concat(e));const[t,i]=n.split("@");r=[...t?t.split("."):[],i]}else{if(!W.test(n))throw new Error("Invalid SuiNS name ".concat(e));r=n.split(".").slice(0,-1)}return"dot"===t?"".concat(r.join("."),".sui"):"".concat(r.slice(0,-1).join("."),"@").concat(r[r.length-1])}(e,t))}}async getProtocolConfig(e){return await this.transport.request({method:"sui_getProtocolConfig",params:[null==e?void 0:e.version]})}async waitForTransaction(e){let{signal:t,timeout:n=6e4,pollInterval:i=2e3}=e,s=(0,r.A)(e,v);const o=AbortSignal.timeout(n),a=new Promise((e,t)=>{o.addEventListener("abort",()=>t(o.reason))});for(a.catch(()=>{});!o.aborted;){null==t||t.throwIfAborted();try{return await this.getTransactionBlock(s)}catch(c){await Promise.race([new Promise(e=>setTimeout(e,i)),a])}}throw o.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}}class Pr extends a.C{}const Br="Sui",Ur=e=>{var t;const n=null==(t=e.data)?void 0:t.content;return n&&"moveObject"===n.dataType?n.fields:null},zr=(e,t)=>{try{return(0,s.m)(e)===(0,s.m)(t)}catch(n){return!1}},Rr=e=>"created"===(null==e?void 0:e.type),_r=e=>"published"===(null==e?void 0:e.type);function Dr(e){return!Array.isArray(e)&&"object"==typeof e&&"fields"in e&&"type"in e}function Nr(e){return"object"==typeof e&&!function(e){return Array.isArray(e)}(e)&&!Dr(e)}function Vr(e){return"object"==typeof e&&"id"in e}const qr=async(e,t)=>{const{data:n,error:r}=await e.getObject({id:t,options:{showContent:!0}});if(r)throw new Error("Error getting object: "+r);if(!n||!Dr(n.content))throw new Error("Cannot get oject for state id ".concat(t,": ")+n);return(0,s.o)(n.content.type)},Lr=async(e,t)=>{if(!(0,s.b)(t))throw new Error("Invalid object ID: ".concat(t));const n=await e.getObject({id:t,options:{showContent:!0}});return Ur(n)},Wr=async(e,t)=>{let n,r;do{const i=await e.getDynamicFields({parentId:t,cursor:r});n=i.data.find(e=>e.name.type.endsWith("CurrentPackage")),r=i.hasNextPage?i.nextCursor:null}while(r&&!n);if(!n)throw new Error("CurrentPackage not found");const i=await e.getObject({id:n.objectId,options:{showContent:!0}}),s=Ur(i);if(!s||!Nr(s))throw new Error("Unable to get fields from object response");if(!("value"in s)||!Dr(s.value))throw new Error("Unable to get package id");return s.value.fields.package},Kr=async(e,t,n)=>{let r,i=null,s=null,o=null;do{if(o=await e.getOwnedObjects({owner:n,filter:{StructType:"".concat(t,"::emitter::EmitterCap")},options:{showContent:!0},cursor:r}),!o||!o.data)throw Error("Failed to get owned objects");for(const e of o.data){if(!e.data)continue;const{version:t,objectId:n}=e.data;(null===i||t<i)&&(i=t,s=n)}r=o.hasNextPage?o.nextCursor:void 0}while(r);return s},$r=async(e,t)=>{const n=new Ar,[r]=n.publish({modules:e.modules.map(e=>Array.from(c.a4.decode(e))),dependencies:e.dependencies.map(e=>(0,s.k)(e))});return n.transferObjects([r],n.pure.address(t)),n},Fr=class e extends a.P{constructor(t,n){super(t,null!==n&&void 0!==n?n:(0,c.bE)(t,e._platform))}getRpc(e){if(e in this.config)return new Mr({url:this.config[e].rpc});throw new Error("No configuration available for chain: "+e)}getChain(e){if(e in this.config)return new Pr(e,this);throw new Error("No configuration available for chain: "+e)}static nativeTokenId(t,n){if(!e.isSupportedChain(n))throw new Error("invalid chain for ".concat(Br,": ").concat(n));return c.W.tokenId(n,s.p)}static isNativeTokenId(t,n,r){return!(!e.isSupportedChain(n)||r.chain!==n)&&this.nativeTokenId(t,n)===r}static isSupportedChain(t){return(0,c.a5)(t)===e._platform}static async getDecimals(t,n,r){if((0,c.j)(r))return(0,c.bG)(e._platform);const i=new s.S(r);try{const e=await Lr(n,i.toString());if(e&&"decimals"in e)return e.decimals}catch(a){}const o=await n.getCoinMetadata({coinType:i.toString()});if(null===o)throw new Error("Can't fetch decimals for token ".concat(i.toString()));return o.decimals}static async getCoins(e,t,n){let r=[],i=null;const o=new s.S(t).toString();do{const t=await e.getCoins({owner:o,coinType:n,cursor:i});r=[...r,...t.data],i=t.hasNextPage?t.nextCursor:null}while(i);return r}static async getBalance(e,t,n,r){if((0,c.j)(r)){const{totalBalance:e}=await t.getBalance({owner:n});return BigInt(e)}const{totalBalance:i}=await t.getBalance({owner:n,coinType:r.toString()});return BigInt(i)}static async getBalances(e,t,n,r){return(await Promise.all(r.map(async r=>{const i=await this.getBalance(e,t,n,r);return{[(0,c.j)(r)?"native":new s.S(r).toString()]:i}}))).reduce((e,t)=>Object.assign(e,t),{})}static async sendWait(e,t,n){const r=[];for(const i of n){const e=await t.executeTransactionBlock(i);await t.waitForTransaction({digest:e.digest}),r.push(e.digest)}return r}static async getLatestBlock(e){return Number(await e.getLatestCheckpointSequenceNumber())}static async getLatestFinalizedBlock(e){return this.getLatestBlock(e)}static chainFromChainId(t){const n=(0,c.bH)(e._platform,t);if(void 0===n)throw new Error("Unknown native chain id ".concat(t));const[r,i]=n;return[r,i]}static async chainFromRpc(e){const t=await e.call("sui_getChainIdentifier",[]);return this.chainFromChainId(t)}};w(Fr,"_platform",Br);let Gr=Fr},6415:(e,t,n)=>{n.r(t),n.d(t,{default:()=>V});var r=n(6391),i=n(7547),s=n(838),o=n(9111),a=n(9558),c=Object.defineProperty,u=(e,t,n)=>((e,t,n)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n),l={};Object.defineProperty(l,"__esModule",{value:!0}),l.bech32m=w=l.bech32=void 0;const d="qpzry9x8gf2tvdw0s3jn54khce6mua7l",h={};for(let q=0;q<32;q++){const e=d.charAt(q);h[e]=q}function p(e){const t=e>>25;return(33554431&e)<<5^996825010&-(1&t)^642813549&-(t>>1&1)^513874426&-(t>>2&1)^1027748829&-(t>>3&1)^705979059&-(t>>4&1)}function g(e){let t=1;for(let n=0;n<e.length;++n){const r=e.charCodeAt(n);if(r<33||r>126)return"Invalid prefix ("+e+")";t=p(t)^r>>5}t=p(t);for(let n=0;n<e.length;++n){const r=e.charCodeAt(n);t=p(t)^31&r}return t}function f(e,t,n,r){let i=0,s=0;const o=(1<<n)-1,a=[];for(let c=0;c<e.length;++c)for(i=i<<t|e[c],s+=t;s>=n;)s-=n,a.push(i>>s&o);if(r)s>0&&a.push(i<<n-s&o);else{if(s>=t)return"Excess padding";if(i<<n-s&o)return"Non-zero padding"}return a}function m(e){return f(e,8,5,!0)}function y(e){const t=f(e,5,8,!1);if(Array.isArray(t))return t}function v(e){const t=f(e,5,8,!1);if(Array.isArray(t))return t;throw new Error(t)}function b(e){let t;function n(e,n){if(n=n||90,e.length<8)return e+" too short";if(e.length>n)return"Exceeds length limit";const r=e.toLowerCase(),i=e.toUpperCase();if(e!==r&&e!==i)return"Mixed-case string "+e;const s=(e=r).lastIndexOf("1");if(-1===s)return"No separator character for "+e;if(0===s)return"Missing prefix for "+e;const o=e.slice(0,s),a=e.slice(s+1);if(a.length<6)return"Data too short";let c=g(o);if("string"==typeof c)return c;const u=[];for(let t=0;t<a.length;++t){const e=a.charAt(t),n=h[e];if(void 0===n)return"Unknown character "+e;c=p(c)^n,!(t+6>=a.length)&&u.push(n)}return c!==t?"Invalid checksum for "+e:{prefix:o,words:u}}return t="bech32"===e?1:734539939,{decodeUnsafe:function(e,t){const r=n(e,t);if("object"==typeof r)return r},decode:function(e,t){const r=n(e,t);if("object"==typeof r)return r;throw new Error(r)},encode:function(e,n,r){if(r=r||90,e.length+7+n.length>r)throw new TypeError("Exceeds length limit");let i=g(e=e.toLowerCase());if("string"==typeof i)throw new Error(i);let s=e+"1";for(let t=0;t<n.length;++t){const e=n[t];if(e>>5)throw new Error("Non 5-bit word");i=p(i)^e,s+=d.charAt(e)}for(let t=0;t<6;++t)i=p(i);i^=t;for(let t=0;t<6;++t){s+=d.charAt(i>>5*(5-t)&31)}return s},toWords:m,fromWordsUnsafe:y,fromWords:v}}var w=l.bech32=b("bech32");function k(e,t){return r.s.IntentMessage(r.s.fixedArray(t.length,r.s.u8())).serialize({intent:{scope:{[e]:!0},version:{V0:!0},appId:{Sui:!0}},value:t}).toBytes()}l.bech32m=b("bech32m");const S={ED25519:0,Secp256k1:1,Secp256r1:2,MultiSig:3,ZkLogin:5,Passkey:6},j={ED25519:32,Secp256k1:33,Secp256r1:33},O={0:"ED25519",1:"Secp256k1",2:"Secp256r1",3:"MultiSig",5:"ZkLogin",6:"Passkey"};function I(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}class E{equals(e){return I(this.toRawBytes(),e.toRawBytes())}toBase64(){return(0,s.t)(this.toRawBytes())}toString(){throw new Error("`toString` is not implemented on public keys. Use `toBase64()` or `toRawBytes()` instead.")}toSuiPublicKey(){const e=this.toSuiBytes();return(0,s.t)(e)}verifyWithIntent(e,t,n){const r=k(n,e),i=(0,o.b)(r,{dkLen:32});return this.verify(i,t)}verifyPersonalMessage(e,t){return this.verifyWithIntent(r.s.vector(r.s.u8()).serialize(e).toBytes(),t,"PersonalMessage")}verifyTransaction(e,t){return this.verifyWithIntent(e,t,"TransactionData")}verifyAddress(e){return this.toSuiAddress()===e}toSuiBytes(){const e=this.toRawBytes(),t=new Uint8Array(e.length+1);return t.set([this.flag()]),t.set(e,1),t}toSuiAddress(){return(0,s.n)((0,i.bI)((0,o.b)(this.toSuiBytes(),{dkLen:32})).slice(0,2*s.c))}}function C(e){let{signature:t,signatureScheme:n,publicKey:r}=e;if(!r)throw new Error("`publicKey` is required");const i=r.toRawBytes(),o=new Uint8Array(1+t.length+i.length);return o.set([S[n]]),o.set(t,1),o.set(i,1+t.length),(0,s.t)(o)}const x="suiprivkey";class A{async signWithIntent(e,t){const n=k(t,e),r=(0,o.b)(n,{dkLen:32});return{signature:C({signature:await this.sign(r),signatureScheme:this.getKeyScheme(),publicKey:this.getPublicKey()}),bytes:(0,s.t)(e)}}async signTransaction(e){return this.signWithIntent(e,"TransactionData")}async signPersonalMessage(e){const{signature:t}=await this.signWithIntent(r.c.vector(r.c.u8()).serialize(e).toBytes(),"PersonalMessage");return{bytes:(0,s.t)(e),signature:t}}toSuiAddress(){return this.getPublicKey().toSuiAddress()}}class T extends A{}function M(e){return!!new RegExp("^m\\/44'\\/784'\\/[0-9]+'\\/[0-9]+'\\/[0-9]+'+$").test(e)}function P(e){return(0,s.d)(function(e){return(0,a.m)(e,"")}(e))}const B=new RegExp("^m(\\/[0-9]+')+$"),U=e=>e.replace("'",""),z=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2147483648;if(!(e=>!!B.test(e)&&!e.split("/").slice(1).map(U).some(isNaN))(e))throw new Error("Invalid derivation path");const{key:r,chainCode:o}=(e=>{const t=i.bJ.create(i.bK,"ed25519 seed").update((0,s.e)(e)).digest();return{key:t.slice(0,32),chainCode:t.slice(32)}})(t);return e.split("/").slice(1).map(U).map(e=>parseInt(e,10)).reduce((e,t)=>((e,t)=>{let{key:n,chainCode:r}=e;const s=new ArrayBuffer(4);new DataView(s).setUint32(0,t);const o=new Uint8Array(1+n.length+s.byteLength);o.set(new Uint8Array(1).fill(0)),o.set(n,1),o.set(new Uint8Array(s,0,s.byteLength),n.length+1);const a=i.bJ.create(i.bK,r).update(o).digest();return{key:a.slice(0,32),chainCode:a.slice(32)}})(e,t+n),{key:r,chainCode:o})};class R extends E{constructor(e){if(super(),"string"==typeof e?this.data=(0,s.f)(e):e instanceof Uint8Array?this.data=e:this.data=Uint8Array.from(e),32!==this.data.length)throw new Error("Invalid public key input. Expected ".concat(32," bytes, got ").concat(this.data.length))}equals(e){return super.equals(e)}toRawBytes(){return this.data}flag(){return S.ED25519}async verify(e,t){let n;if("string"==typeof t){const e=function(e){const t=(0,s.f)(e),n=O[t[0]];switch(n){case"ED25519":case"Secp256k1":case"Secp256r1":const r=j[n],i=t.slice(1,t.length-r);return{serializedSignature:e,signatureScheme:n,signature:i,publicKey:t.slice(1+i.length),bytes:t};default:throw new Error("Unsupported signature scheme")}}(t);if("ED25519"!==e.signatureScheme)throw new Error("Invalid signature scheme");if(!I(this.toRawBytes(),e.publicKey))throw new Error("Signature does not match public key");n=e.signature}else n=t;return i.bi.verify(n,e,this.toRawBytes())}}R.SIZE=32;const _="m/44'/784'/0'/0'/0'";class D extends T{constructor(e){if(super(),e)this.keypair={publicKey:e.publicKey,secretKey:e.secretKey.slice(0,32)};else{const e=i.bi.utils.randomPrivateKey();this.keypair={publicKey:i.bi.getPublicKey(e),secretKey:e}}}getKeyScheme(){return"ED25519"}static generate(){const e=i.bi.utils.randomPrivateKey();return new D({publicKey:i.bi.getPublicKey(e),secretKey:e})}static fromSecretKey(e,t){if("string"==typeof e){const n=function(e){const{prefix:t,words:n}=w.decode(e);if(t!==x)throw new Error("invalid private key prefix");const r=new Uint8Array(w.fromWords(n)),i=r.slice(1);return{schema:O[r[0]],secretKey:i}}(e);if("ED25519"!==n.schema)throw new Error("Expected a ED25519 keypair, got ".concat(n.schema));return this.fromSecretKey(n.secretKey,t)}const n=e.length;if(32!==n)throw new Error("Wrong secretKey size. Expected ".concat(32," bytes, got ").concat(n,"."));const r={publicKey:i.bi.getPublicKey(e),secretKey:e};if(!t||!t.skipValidation){const t=(new TextEncoder).encode("sui validation"),n=i.bi.sign(t,e);if(!i.bi.verify(n,t,r.publicKey))throw new Error("provided secretKey is invalid")}return new D(r)}getPublicKey(){return new R(this.keypair.publicKey)}getSecretKey(){return function(e,t){if(32!==e.length)throw new Error("Invalid bytes length");const n=S[t],r=new Uint8Array(e.length+1);return r.set([n]),r.set(e,1),w.encode(x,w.toWords(r))}(this.keypair.secretKey.slice(0,32),this.getKeyScheme())}async sign(e){return i.bi.sign(e,this.keypair.secretKey)}static deriveKeypair(e,t){if(null==t&&(t=_),!M(t))throw new Error("Invalid derivation path");const{key:n}=z(t,P(e));return D.fromSecretKey(n)}static deriveKeypairFromSeed(e,t){if(null==t&&(t=_),!M(t))throw new Error("Invalid derivation path");const{key:n}=z(t,e);return D.fromSecretKey(n)}}class N{constructor(e,t,n,r){u(this,"_chain"),u(this,"_client"),u(this,"_signer"),u(this,"_debug"),this._chain=e,this._client=t,this._signer=n,this._debug=r}chain(){return this._chain}address(){return this._signer.toSuiAddress()}async signAndSend(e){const t=[];for(const r of e){const{description:e,transaction:i}=r;this._debug&&console.log("Signing ".concat(e," for ").concat(this.address()));try{const e=await this._client.signAndExecuteTransaction({transaction:i,signer:this._signer});t.push(e.digest)}catch(n){throw n}}return t}}const V={Address:s.S,Platform:r.b,getSigner:async function(e,t){const[,n]=await r.b.chainFromRpc(e);return new N(n,e,D.deriveKeypair(t,"m/44'/784'/0'/0'/0'"))},protocols:{WormholeCore:()=>n.e(1472).then(n.bind(n,1472)),TokenBridge:()=>n.e(443).then(n.bind(n,443)),CircleBridge:()=>n.e(1388).then(n.bind(n,1388))},getChain:(e,t,n)=>new r.d(t,new r.b(e,(0,i.bD)(e,r._,{[t]:n})))}},9111:(e,t,n)=>{n.d(t,{b:()=>d});var r=n(7547);const i=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),s=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),o=new Uint32Array(32);function a(e,t,n,i,s,a){const c=s[a],u=s[a+1];let l=o[2*e],d=o[2*e+1],h=o[2*t],p=o[2*t+1],g=o[2*n],f=o[2*n+1],m=o[2*i],y=o[2*i+1],v=(0,r.cu)(l,h,c);d=(0,r.cm)(v,d,p,u),l=0|v,({Dh:y,Dl:m}={Dh:y^d,Dl:m^l}),({Dh:y,Dl:m}={Dh:(0,r.co)(y,m),Dl:(0,r.cn)(y)}),({h:f,l:g}=(0,r.cp)(f,g,y,m)),({Bh:p,Bl:h}={Bh:p^f,Bl:h^g}),({Bh:p,Bl:h}={Bh:(0,r.cr)(p,h,24),Bl:(0,r.cq)(p,h,24)}),o[2*e]=l,o[2*e+1]=d,o[2*t]=h,o[2*t+1]=p,o[2*n]=g,o[2*n+1]=f,o[2*i]=m,o[2*i+1]=y}function c(e,t,n,i,s,a){const c=s[a],u=s[a+1];let l=o[2*e],d=o[2*e+1],h=o[2*t],p=o[2*t+1],g=o[2*n],f=o[2*n+1],m=o[2*i],y=o[2*i+1],v=(0,r.cu)(l,h,c);d=(0,r.cm)(v,d,p,u),l=0|v,({Dh:y,Dl:m}={Dh:y^d,Dl:m^l}),({Dh:y,Dl:m}={Dh:(0,r.cr)(y,m,16),Dl:(0,r.cq)(y,m,16)}),({h:f,l:g}=(0,r.cp)(f,g,y,m)),({Bh:p,Bl:h}={Bh:p^f,Bl:h^g}),({Bh:p,Bl:h}={Bh:(0,r.ct)(p,h,63),Bl:(0,r.cs)(p,h,63)}),o[2*e]=l,o[2*e+1]=d,o[2*t]=h,o[2*t+1]=p,o[2*n]=g,o[2*n+1]=f,o[2*i]=m,o[2*i+1]=y}class u extends r.cg{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,(0,r.ch)(e),(0,r.ch)(t),this.blockLen=e,this.outputLen=t,this.buffer=new Uint8Array(e),this.buffer32=(0,r.cc)(this.buffer)}update(e){(0,r.ci)(this),e=(0,r.cb)(e),(0,r.cj)(e);const{blockLen:t,buffer:n,buffer32:i}=this,s=e.length,o=e.byteOffset,a=e.buffer;for(let c=0;c<s;){this.pos===t&&((0,r.ck)(i),this.compress(i,0,!1),(0,r.ck)(i),this.pos=0);const u=Math.min(t-this.pos,s-c),l=o+c;if(u===t&&!(l%4)&&c+u<s){const e=new Uint32Array(a,l,Math.floor((s-c)/4));(0,r.ck)(e);for(let n=0;c+t<s;n+=i.length,c+=t)this.length+=t,this.compress(e,n,!1);(0,r.ck)(e);continue}n.set(e.subarray(c,c+u),this.pos),this.pos+=u,this.length+=u,c+=u}return this}digestInto(e){(0,r.ci)(this),(0,r.cl)(e,this);const{pos:t,buffer32:n}=this;this.finished=!0,(0,r.cf)(this.buffer.subarray(t)),(0,r.ck)(n),this.compress(n,0,!0),(0,r.ck)(n);const i=(0,r.cc)(e);this.get().forEach((e,t)=>i[t]=(0,r.cd)(e))}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){const{buffer:t,length:n,finished:r,destroyed:i,outputLen:s,pos:o}=this;return e||(e=new this.constructor({dkLen:s})),e.set(...this.get()),e.buffer.set(t),e.destroyed=i,e.finished=r,e.length=n,e.pos=o,e.outputLen=s,e}clone(){return this._cloneInto()}}class l extends u{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=void 0===e.dkLen?64:e.dkLen;super(128,t),this.v0l=0|s[0],this.v0h=0|s[1],this.v1l=0|s[2],this.v1h=0|s[3],this.v2l=0|s[4],this.v2h=0|s[5],this.v3l=0|s[6],this.v3h=0|s[7],this.v4l=0|s[8],this.v4h=0|s[9],this.v5l=0|s[10],this.v5h=0|s[11],this.v6l=0|s[12],this.v6h=0|s[13],this.v7l=0|s[14],this.v7h=0|s[15],function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;if((0,r.ch)(n),e<0||e>n)throw new Error("outputLen bigger than keyLen");const{key:o,salt:a,personalization:c}=t;if(void 0!==o&&(o.length<1||o.length>n))throw new Error("key length must be undefined or 1.."+n);if(void 0!==a&&a.length!==i)throw new Error("salt must be undefined or "+i);if(void 0!==c&&c.length!==s)throw new Error("personalization must be undefined or "+s)}(t,e,64,16,16);let{key:n,personalization:i,salt:o}=e,a=0;if(void 0!==n&&(n=(0,r.cb)(n),a=n.length),this.v0l^=this.outputLen|a<<8|65536|1<<24,void 0!==o){o=(0,r.cb)(o);const e=(0,r.cc)(o);this.v4l^=(0,r.cd)(e[0]),this.v4h^=(0,r.cd)(e[1]),this.v5l^=(0,r.cd)(e[2]),this.v5h^=(0,r.cd)(e[3])}if(void 0!==i){i=(0,r.cb)(i);const e=(0,r.cc)(i);this.v6l^=(0,r.cd)(e[0]),this.v6h^=(0,r.cd)(e[1]),this.v7l^=(0,r.cd)(e[2]),this.v7h^=(0,r.cd)(e[3])}if(void 0!==n){const e=new Uint8Array(this.blockLen);e.set(n),this.update(e)}}get(){let{v0l:e,v0h:t,v1l:n,v1h:r,v2l:i,v2h:s,v3l:o,v3h:a,v4l:c,v4h:u,v5l:l,v5h:d,v6l:h,v6h:p,v7l:g,v7h:f}=this;return[e,t,n,r,i,s,o,a,c,u,l,d,h,p,g,f]}set(e,t,n,r,i,s,o,a,c,u,l,d,h,p,g,f){this.v0l=0|e,this.v0h=0|t,this.v1l=0|n,this.v1h=0|r,this.v2l=0|i,this.v2h=0|s,this.v3l=0|o,this.v3h=0|a,this.v4l=0|c,this.v4h=0|u,this.v5l=0|l,this.v5h=0|d,this.v6l=0|h,this.v6h=0|p,this.v7l=0|g,this.v7h=0|f}compress(e,t,n){this.get().forEach((e,t)=>o[t]=e),o.set(s,16);let{h:u,l:l}=(0,r.ce)(BigInt(this.length));o[24]=s[8]^l,o[25]=s[9]^u,n&&(o[28]=~o[28],o[29]=~o[29]);let d=0;const h=i;for(let r=0;r<12;r++)a(0,4,8,12,e,t+2*h[d++]),c(0,4,8,12,e,t+2*h[d++]),a(1,5,9,13,e,t+2*h[d++]),c(1,5,9,13,e,t+2*h[d++]),a(2,6,10,14,e,t+2*h[d++]),c(2,6,10,14,e,t+2*h[d++]),a(3,7,11,15,e,t+2*h[d++]),c(3,7,11,15,e,t+2*h[d++]),a(0,5,10,15,e,t+2*h[d++]),c(0,5,10,15,e,t+2*h[d++]),a(1,6,11,12,e,t+2*h[d++]),c(1,6,11,12,e,t+2*h[d++]),a(2,7,8,13,e,t+2*h[d++]),c(2,7,8,13,e,t+2*h[d++]),a(3,4,9,14,e,t+2*h[d++]),c(3,4,9,14,e,t+2*h[d++]);this.v0l^=o[0]^o[16],this.v0h^=o[1]^o[17],this.v1l^=o[2]^o[18],this.v1h^=o[3]^o[19],this.v2l^=o[4]^o[20],this.v2h^=o[5]^o[21],this.v3l^=o[6]^o[22],this.v3h^=o[7]^o[23],this.v4l^=o[8]^o[24],this.v4h^=o[9]^o[25],this.v5l^=o[10]^o[26],this.v5h^=o[11]^o[27],this.v6l^=o[12]^o[28],this.v6h^=o[13]^o[29],this.v7l^=o[14]^o[30],this.v7h^=o[15]^o[31],(0,r.cf)(o)}destroy(){this.destroyed=!0,(0,r.cf)(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const d=(0,r.ca)(e=>new l(e))},9558:(e,t,n)=>{n.d(t,{m:()=>a});var r=n(7547);function i(e,t,n,i){const{c:s,dkLen:o,DK:a,PRF:c,PRFSalt:u}=function(e,t,n,i){(0,r.d1)(e);const s=(0,r.d2)({dkLen:32,asyncTick:10},i),{c:o,dkLen:a,asyncTick:c}=s;if((0,r.ch)(o),(0,r.ch)(a),(0,r.ch)(c),o<1)throw new Error("iterations (c) should be >= 1");const u=(0,r.d3)(t),l=(0,r.d3)(n),d=new Uint8Array(a),h=r.bJ.create(e,u),p=h._cloneInto().update(l);return{c:o,dkLen:a,asyncTick:c,DK:d,PRF:h,PRFSalt:p}}(e,t,n,i);let l;const d=new Uint8Array(4),h=(0,r.cG)(d),p=new Uint8Array(c.outputLen);for(let r=1,g=0;g<o;r++,g+=c.outputLen){const e=a.subarray(g,g+c.outputLen);h.setInt32(0,r,!1),(l=u._cloneInto(l)).update(d).digestInto(p),e.set(p.subarray(0,e.length));for(let t=1;t<s;t++){c._cloneInto(l).update(p).digestInto(p);for(let t=0;t<e.length;t++)e[t]^=p[t]}}return function(e,t,n,i,s){return e.destroy(),t.destroy(),i&&i.destroy(),(0,r.cf)(s),n}(c,u,a,l,p)}function s(e){if("string"!=typeof e)throw new TypeError("invalid mnemonic type: "+typeof e);return e.normalize("NFKD")}const o=e=>s("mnemonic"+e);function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return i(r.cK,function(e){const t=s(e),n=t.split(" ");if(![12,15,18,21,24].includes(n.length))throw new Error("Invalid mnemonic");return{nfkd:t,words:n}}(e).nfkd,o(t),{c:2048,dkLen:64})}},9801:(e,t,n)=>{n.d(t,{C:()=>d,P:()=>l,r:()=>c});var r=n(9379),i=n(7547),s=Object.defineProperty,o=(e,t,n)=>((e,t,n)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);const a={};function c(e,t,n){t in a||(a[t]={});if(e in a[t])throw new Error("Protocol ".concat(e," for protocol ").concat(t," has already registered"));a[t][e]=n}function u(e,t){if(t in a){const n=a[t];if(n&&e in n){const t=n[e];if(t)return t}}throw new Error("No protocols registered for ".concat(e,":").concat(t,". This may be because the platform specific protocol implementation is not registered (by installing and importing it) or no implementation exists for this platform"))}class l{constructor(e,t){o(this,"network"),o(this,"config"),this.network=e,this.config=t}utils(){return this.constructor}getProtocol(e,t){return((e,t,n,r)=>u(e,t).fromRpc(n,r))(this.utils()._platform,e,t,this.config)}getProtocolInitializer(e){return u(this.utils()._platform,e)}async parseWormholeMessages(e,t,n){return(await this.getProtocol("WormholeCore",t)).parseTransaction(n)}}class d{constructor(e,t,n){o(this,"network"),o(this,"chain"),o(this,"config"),o(this,"platform"),o(this,"rpc"),o(this,"protocols",new Map),o(this,"supportsWormholeCore",()=>this.supportsProtocol("WormholeCore")),o(this,"getWormholeCore",()=>this.getProtocol("WormholeCore")),o(this,"supportsTokenBridge",()=>this.supportsProtocol("TokenBridge")),o(this,"getTokenBridge",()=>this.getProtocol("TokenBridge")),o(this,"supportsAutomaticTokenBridge",()=>this.supportsProtocol("AutomaticTokenBridge")),o(this,"getAutomaticTokenBridge",()=>this.getProtocol("AutomaticTokenBridge")),o(this,"supportsCircleBridge",()=>this.supportsProtocol("CircleBridge")),o(this,"getCircleBridge",()=>this.getProtocol("CircleBridge")),o(this,"supportsAutomaticCircleBridge",()=>this.supportsProtocol("AutomaticCircleBridge")),o(this,"getAutomaticCircleBridge",()=>this.getProtocol("AutomaticCircleBridge")),o(this,"supportsIbcBridge",()=>this.supportsProtocol("IbcBridge")),o(this,"getIbcBridge",()=>this.getProtocol("IbcBridge")),o(this,"supportsPorticoBridge",()=>this.supportsProtocol("PorticoBridge")),o(this,"getPorticoBridge",()=>this.getProtocol("PorticoBridge")),o(this,"supportsTBTCBridge",()=>this.supportsProtocol("TBTCBridge")),o(this,"getTBTCBridge",()=>this.getProtocol("TBTCBridge")),this.config=t.config[e],this.platform=t,this.chain=this.config.key,this.network=this.config.network,this.rpc=n}getRpc(){return this.rpc=this.rpc?this.rpc:this.platform.getRpc(this.chain),this.rpc}async getDecimals(e){if((0,i.j)(e))return this.config.nativeTokenDecimals;if(this.config.tokenMap){const t=(0,i.q)({chain:this.chain,address:e}),n=(0,i.c8)(this.network,this.chain,t);if(n)return n.decimals}return this.platform.utils().getDecimals(this.chain,await this.getRpc(),e)}async getBalance(e,t){return this.platform.utils().getBalance(this.chain,await this.getRpc(),e,t)}async getLatestBlock(){return this.platform.utils().getLatestBlock(await this.getRpc())}async getLatestFinalizedBlock(){return this.platform.utils().getLatestFinalizedBlock(await this.getRpc())}async parseTransaction(e){return this.platform.parseWormholeMessages(this.chain,await this.getRpc(),e)}async sendWait(e){return this.platform.utils().sendWait(this.chain,await this.getRpc(),e)}getToken(e){if(this.config.tokenMap&&e in this.config.tokenMap)return this.config.tokenMap[e]}async getNativeWrappedTokenId(){if(this.config.wrappedNative){const{address:e}=this.config.wrappedNative;return{chain:this.chain,address:(0,i.a7)(this.chain,e)}}const e=await this.getTokenBridge();return{chain:this.chain,address:await e.getWrappedNative()}}async getTokenAccount(e,t){return{chain:this.chain,address:e}}supportsProtocol(e){return function(e,t){const n=(0,i.a6)(e)?i.a5.get(e):e;return t in a&&n in a[t]}(this.chain,e)}async getProtocol(e,t,n){if(!t&&this.protocols.has(e))return this.protocols.get(e);const i=t?(0,r.A)((0,r.A)({},this.config.contracts),t):this.config.contracts,s=null!==n&&void 0!==n?n:await this.getRpc(),o=this.platform.getProtocolInitializer(e);let a;if(n){if(t)throw new Error("Custom contracts are currently not supported with custom rpc connection. Add the contracts to the base config.");a=await this.platform.getProtocol(e,s)}else if("getVersion"in o){const e=await o.getVersion(s,i);a=new o(this.network,this.chain,s,i,e)}else a=new o(this.network,this.chain,s,i);return t||this.protocols.set(e,a),a}}}}]);
//# sourceMappingURL=6415.41596eb2.chunk.js.map